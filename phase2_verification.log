WARNING: All log messages before absl::InitializeLog() is called are written to STDERR
E0000 00:00:1761818300.150000   12889 alts_credentials.cc:93] ALTS creds ignored. Not running on GCP and untrusted ALTS is not enabled.
Configuration capture failed: No module named 'src.config.experiment_config'
E0000 00:00:1761818313.855154   12889 alts_credentials.cc:93] ALTS creds ignored. Not running on GCP and untrusted ALTS is not enabled.
Configuration capture failed: No module named 'src.config.experiment_config'
E0000 00:00:1761818332.816902   12889 alts_credentials.cc:93] ALTS creds ignored. Not running on GCP and untrusted ALTS is not enabled.
Testing autonomous loop...

Note: Running without real finlab data - execution will fail
      This tests the loop mechanism, not actual strategy performance


============================================================
AUTONOMOUS LEARNING LOOP - START
============================================================
Model: gemini-2.5-flash
Max iterations: 3
Sandbox mode: ENABLED


============================================================
ITERATION 0
============================================================


[0.5/6] Capturing configuration snapshot...
âœ… Configuration captured
[1/6] Building prompt...
âœ… Prompt ready (7937 chars)

[2/6] Generating strategy with gemini-2.5-flash...
   â†’ Using Factor Graph mutation (default)
ğŸ¯ Attempting Google AI (primary)...
Calling Google AI with gemini-2.5-flash (attempt 1/3)...
ğŸ“ Response preview: # 1. Load data
close = data.get('price:æ”¶ç›¤åƒ¹')
trading_value = data.get('price:æˆäº¤é‡‘é¡')
roe = data.get('fundamental_features:ROEç¨…å¾Œ')
revenue_yoy = data.get('monthly_revenue:å»å¹´åŒæœˆå¢æ¸›(%)')
foreign_net_buy = data.get('institutional_investors_trading_summary:å¤–é™¸è³‡è²·è³£è¶…è‚¡æ•¸(ä¸å«å¤–è³‡è‡ªç‡Ÿå•†)')
rsi = data.indicator('RSI')

# 2. Calculate factors
# Factor 1: Price Momentum (60-day returns)
momentum = close.pct_change(60).shift(1)

# Factor 2: Quality (ROE with 4-quarter smoothing, forward-filled)
quality = roe.rolling(4).m...
   âœ“ Detected raw Python code (Strategy 3): 36/39 lines are Python
âœ… Successfully generated strategy (1823 chars)
âœ… Strategy generated (1823 chars)

[2.5/6] Auto-fixing dataset keys...
   Code hash: 2e0605d361907159
âœ… No fixes needed

[2.7/6] Static validation...
âœ… Static validation passed

[3/6] Validating code...
âœ… Validation passed

[4/6] Executing strategy (mode: sandbox)...
âŒ Execution failed
   Error: Container exited with code 1:
Traceback (most recent call last):
  File "/code/strategy.py", line 31...

[5/6] Building feedback...
âœ… Feedback generated (395 chars)

[6/6] Recording iteration...
âœ… Iteration recorded
âœ… Code saved to generated_strategy_loop_iter0.py

============================================================
ITERATION 1
============================================================


[0.5/6] Capturing configuration snapshot...
âš ï¸  Configuration capture failed (continuing)
[1/6] Building prompt...
âœ… Prompt ready (8341 chars)

[2/6] Generating strategy with gemini-2.5-flash...
   â†’ Using Factor Graph mutation (default)
ğŸ¯ Attempting Google AI (primary)...
Calling Google AI with gemini-2.5-flash (attempt 1/3)...
ğŸ“ Response preview: # 1. Load data
close = data.get('price:æ”¶ç›¤åƒ¹')
trading_value = data.get('price:æˆäº¤é‡‘é¡')
roe = data.get('fundamental_features:ROEç¨…å¾Œ')
revenue_yoy = data.get('monthly_revenue:å»å¹´åŒæœˆå¢æ¸›(%)')
foreign_net_buy = data.get('institutional_investors_trading_summary:å¤–é™¸è³‡è²·è³£è¶…è‚¡æ•¸(ä¸å«å¤–è³‡è‡ªç‡Ÿå•†)')
pe_ratio = data.get('price_earning_ratio:æœ¬ç›Šæ¯”')
market_cap = data.get('etl:market_value')

# 2. Calculate factors
# Factor 1: Price Momentum (60-day returns)
momentum = close.pct_change(60).shift(1)

# Factor 2: Quality (ROE with 4-...
   âœ“ Detected raw Python code (Strategy 3): 41/45 lines are Python
âœ… Successfully generated strategy (2136 chars)
âœ… Strategy generated (2136 chars)

[2.5/6] Auto-fixing dataset keys...
   Code hash: a278cc327369a401
âœ… No fixes needed

[2.7/6] Static validation...
âœ… Static validation passed

[3/6] Validating code...
âœ… Validation passed

[4/6] Executing strategy (mode: sandbox)...
âŒ Execution failed
   Error: Container exited with code 1:
Traceback (most recent call last):
  File "/code/strategy.py", line 31...

[5/6] Building feedback...
âœ… Feedback generated (395 chars)

[6/6] Recording iteration...
âœ… Iteration recorded
âœ… Code saved to generated_strategy_loop_iter1.py

============================================================
ITERATION 2
============================================================


[0.5/6] Capturing configuration snapshot...
âš ï¸  Configuration capture failed (continuing)
[1/6] Building prompt...
âœ… Prompt ready (8341 chars)

[2/6] Generating strategy with gemini-2.5-flash...
   â†’ Using Factor Graph mutation (default)
ğŸ¯ Attempting Google AI (primary)...
Calling Google AI with gemini-2.5-flash (attempt 1/3)...
ğŸ“ Response preview: # 1. Load data
close = data.get('price:æ”¶ç›¤åƒ¹')
trading_value = data.get('price:æˆäº¤é‡‘é¡')
market_cap = data.get('etl:market_value')
roe = data.get('fundamental_features:ROEç¨…å¾Œ')
revenue_yoy = data.get('monthly_revenue:å»å¹´åŒæœˆå¢æ¸›(%)')
foreign_net_buy = data.get('institutional_investors_trading_summary:å¤–é™¸è³‡è²·è³£è¶…è‚¡æ•¸(ä¸å«å¤–è³‡è‡ªç‡Ÿå•†)')
rsi = data.indicator('RSI')

# 2. Calculate factors
# Factor 1: Medium-term Price Momentum (60-day returns)
momentum = close.pct_change(60).shift(1)

# Factor 2: Quality (ROE with 4-quarter...
   âœ“ Detected raw Python code (Strategy 3): 43/46 lines are Python
âœ… Successfully generated strategy (2266 chars)
âœ… Strategy generated (2266 chars)

[2.5/6] Auto-fixing dataset keys...
   Code hash: 79d313f3d084b43e
âœ… No fixes needed

[2.7/6] Static validation...
âœ… Static validation passed

[3/6] Validating code...
âœ… Validation passed

[4/6] Executing strategy (mode: sandbox)...
âŒ Execution failed
   Error: Container exited with code 1:
Traceback (most recent call last):
  File "/code/strategy.py", line 31...

[5/6] Building feedback...
âœ… Feedback generated (395 chars)

[6/6] Recording iteration...
âœ… Iteration recorded
âœ… Code saved to generated_strategy_loop_iter2.py

============================================================
AUTONOMOUS LEARNING LOOP - COMPLETE
============================================================
Total time: 54.2s
Total iterations: 3
âœ… Successful: 0
âŒ Failed: 3
   - Validation failures: 0
   - Execution failures: 3

Success rate: 0.0%

============================================================
LLM INNOVATION STATISTICS
============================================================
LLM enabled: True
Innovation rate: 5.0%
LLM innovations: 0
LLM fallbacks: 0
Factor Graph mutations: 3
LLM success rate: 0.0%

LLM Costs:
  Total cost: $0.000000
  Total tokens: 0
  Successful generations: 0

============================================================
TEST RESULTS
============================================================
Loop completed: 3 iterations
Time per iteration: 18.1s

âœ… Autonomous loop mechanism verified
