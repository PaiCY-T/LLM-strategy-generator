{
  "case": "simple",
  "run": 1,
  "complexity": "low",
  "strategy_code": "close = data.get('price:\u6536\u76e4\u50f9')\nvol = data.get('price:\u6210\u4ea4\u80a1\u6578')\nhigh = data.get('price:\u6700\u9ad8\u50f9')\nlow = data.get('price:\u6700\u4f4e\u50f9')\nopen_price = data.get('price:\u958b\u76e4\u50f9')\n\nroe = data.get('fundamental_features:ROE\u7a05\u5f8c').shift(1)\neps = data.get('fundamental_features:\u6bcf\u80a1\u7a05\u5f8c\u6de8\u5229').shift(1)\nmargin = data.get('fundamental_features:\u71df\u696d\u5229\u76ca\u7387').shift(1)\ndebt = data.get('fundamental_features:\u8ca0\u50b5\u6bd4\u7387').shift(1)\n\npb = data.get('price_earning_ratio:\u80a1\u50f9\u6de8\u503c\u6bd4').shift(1)\npe = data.get('price_earning_ratio:\u672c\u76ca\u6bd4').shift(1)\n\nrev = data.get('monthly_revenue:\u7576\u6708\u71df\u6536').shift(1)\nrev_yoy = data.get('monthly_revenue:\u53bb\u5e74\u540c\u6708\u589e\u6e1b(%)').shift(1)\n\n# === STEP 2: Calculate Indicators ===\n# Short-term Moving Average (e.g., 5-day SMA)\nsma_short = close.average(5)\n# Long-term Moving Average (e.g., 20-day SMA)\nsma_long = close.average(20)\n\n# Volume moving average for liquidity filter\nvol_avg_50d = vol.average(50)\n\n# === STEP 3: Define Conditions ===\n# Condition 1: Short-term MA crosses above Long-term MA (Golden Cross)\n# This indicates an upward momentum shift.\ncond1 = (sma_short > sma_long)\n# To ensure a \"crossover\", we can also check the previous period's condition\n# This prevents holding stocks where SMA_short has been above SMA_long for a long time\ncond1_prev = (sma_short.shift(1) <= sma_long.shift(1))\ngolden_cross = cond1 & cond1_prev\n\n# Condition 2: Volume filter - ensure sufficient liquidity\n# Average daily volume over 50 days is above a certain threshold (e.g., 100,000 shares)\n# Using 50,000 shares as a base, which is 50 * 1000\ncond2 = (vol_avg_50d >= 50 * 1000)\n\n# Condition 3: Price is above long-term moving average (general trend confirmation)\ncond3 = (close > sma_long)\n\n# Condition 4: Basic fundamental screen for profitability (ROE > 0)\n# This helps filter out companies that are consistently losing money.\ncond4 = (roe > 0)\n\n# === STEP 4: Combine & Select ===\n# Combine all conditions for the final position\n# We want stocks that have recently experienced a golden cross, have sufficient liquidity,\n# are in an overall uptrend, and are fundamentally profitable.\nposition = (golden_cross & cond2 & cond3 & cond4).is_largest(10)\n\n# === STEP 5: Filter & Backtest (FIXED - copy exactly) ===\nposition = position.loc[start_date:end_date]\nreport = sim(position, fee_ratio=fee_ratio, tax_ratio=tax_ratio, resample=\"M\")",
  "execution_result": {
    "success": true,
    "sharpe_ratio": 0.5570305126034567,
    "error_type": null,
    "error_message": null,
    "metrics": {
      "sharpe_ratio": 0.5570305126034567,
      "total_return": 1.0196882349153094,
      "max_drawdown": -0.24678579360839337
    }
  },
  "timestamp": "2025-11-21T12:57:00.002016"
}