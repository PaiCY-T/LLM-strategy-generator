# Hybrid Mode (20 iterations)
# 50% LLM + 50% Factor Graph

learning_loop:
  max_iterations: 20
  continue_on_error: false

  history:
    file: experiments/llm_learning_validation/results/hybrid_20/innovations.jsonl
    window: 5

  champion:
    file: experiments/llm_learning_validation/results/hybrid_20/champion.json

  backtest:
    timeout_seconds: 900  # 延長至 15 分鐘，配合月度重新平衡
    resample: M  # 保持月度重新平衡（符合週/月交易系統設計）

  logging:
    log_dir: experiments/llm_learning_validation/results/hybrid_20/logs
    log_level: INFO
    log_to_file: true
    log_to_console: true

# Enable LLM with 50% innovation rate (hybrid mode)
llm:
  enabled: true
  innovation_rate: 0.5  # 50% LLM, 50% Factor Graph
  provider: openrouter
  model: ${LLM_MODEL:google/gemini-2.5-flash}

  generation:
    max_tokens: 2000
    temperature: 0.7
    timeout: 60

  fallback:
    enabled: true  # Fallback to Factor Graph on LLM failures
    max_retries: 3
    retry_delay: 2

  mode: structured
