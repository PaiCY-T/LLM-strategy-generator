2025-10-17 23:19:25,731 - __main__ - INFO - Logging initialized: logs/phase1_smoke_test_20251017_231925.log
2025-10-17 23:19:25,732 - __main__ - INFO - ======================================================================
2025-10-17 23:19:25,732 - __main__ - INFO - PHASE 1: SMOKE TEST (10 GENERATIONS)
2025-10-17 23:19:25,732 - __main__ - INFO - ======================================================================
2025-10-17 23:19:25,732 - __main__ - INFO - Timestamp: 2025-10-17T23:19:25.732822
2025-10-17 23:19:25,732 - __main__ - INFO - Mode: Population-based evolutionary learning
2025-10-17 23:19:25,733 - __main__ - INFO - Target generations: 10
2025-10-17 23:19:25,733 - __main__ - INFO - Population size: 30 (quick validation)
2025-10-17 23:19:25,733 - __main__ - INFO - Expected duration: 25-30 minutes
2025-10-17 23:19:25,733 - __main__ - INFO - Log file: logs/phase1_smoke_test_20251017_231925.log
2025-10-17 23:19:25,733 - __main__ - INFO - 
2025-10-17 23:19:25,734 - __main__ - INFO - ======================================================================
2025-10-17 23:19:25,734 - __main__ - INFO - VALIDATING PHASE 1 COMPONENTS
2025-10-17 23:19:25,734 - __main__ - INFO - ======================================================================
2025-10-17 23:19:25,734 - __main__ - INFO -   âœ… Individual available
2025-10-17 23:19:25,734 - __main__ - INFO -   âœ… PopulationManager available
2025-10-17 23:19:25,734 - __main__ - INFO -   âœ… GeneticOperators available
2025-10-17 23:19:25,734 - __main__ - INFO -   âœ… FitnessEvaluator available
2025-10-17 23:19:25,734 - __main__ - INFO -   âœ… EvolutionMonitor available
2025-10-17 23:19:25,735 - __main__ - INFO -   âœ… MomentumTemplate available
2025-10-17 23:19:25,735 - __main__ - INFO - 
2025-10-17 23:19:25,735 - __main__ - INFO - âœ… All Phase 1 components available
2025-10-17 23:19:25,735 - __main__ - INFO - ======================================================================
2025-10-17 23:19:25,735 - __main__ - INFO - 
2025-10-17 23:19:25,914 - __main__ - INFO - âœ… Finlab data loaded successfully
2025-10-17 23:19:25,914 - __main__ - INFO - Initializing Phase1TestHarness for smoke test...
2025-10-17 23:19:26,112 - tests.integration.phase0_test_harness - INFO - Logging initialized: logs/phase0_test_phase1_smoke_20251017_231926.log
2025-10-17 23:19:26,113 - tests.integration.phase0_test_harness - INFO - Phase0TestHarness initialized:
2025-10-17 23:19:26,113 - tests.integration.phase0_test_harness - INFO -   Test name: phase1_smoke
2025-10-17 23:19:26,114 - tests.integration.phase0_test_harness - INFO -   Model: N/A
2025-10-17 23:19:26,114 - tests.integration.phase0_test_harness - INFO -   Max iterations: 10
2025-10-17 23:19:26,114 - tests.integration.phase0_test_harness - INFO -   Checkpoint interval: 5
2025-10-17 23:19:26,114 - tests.integration.phase0_test_harness - INFO -   Checkpoint dir: checkpoints
2025-10-17 23:19:26,115 - tests.integration.phase0_test_harness - INFO -   Template mode: ENABLED (Momentum)
2025-10-17 23:19:26,115 - tests.integration.phase0_test_harness - INFO - ======================================================================
2025-10-17 23:19:26,115 - tests.integration.phase0_test_harness - INFO - PHASE 1 TEST HARNESS INITIALIZED
2025-10-17 23:19:26,115 - tests.integration.phase0_test_harness - INFO - ======================================================================
2025-10-17 23:19:26,115 - tests.integration.phase0_test_harness - INFO - Population-Based Evolutionary Learning Configuration:
2025-10-17 23:19:26,115 - tests.integration.phase0_test_harness - INFO -   Test name: phase1_smoke
2025-10-17 23:19:26,116 - tests.integration.phase0_test_harness - INFO -   Generations: 10
2025-10-17 23:19:26,116 - tests.integration.phase0_test_harness - INFO -   Population size: 30
2025-10-17 23:19:26,116 - tests.integration.phase0_test_harness - INFO -   Elite size: 3 (10%)
2025-10-17 23:19:26,116 - tests.integration.phase0_test_harness - INFO -   Mutation rate: 0.15 (adaptive 0.05-0.30)
2025-10-17 23:19:26,116 - tests.integration.phase0_test_harness - INFO -   Tournament size: 2
2025-10-17 23:19:26,116 - tests.integration.phase0_test_harness - INFO -   Max restarts: 2
2025-10-17 23:19:26,116 - tests.integration.phase0_test_harness - INFO -   IS period: 2015:2020 (fitness optimization)
2025-10-17 23:19:26,117 - tests.integration.phase0_test_harness - INFO -   OOS period: 2021:2024 (validation)
2025-10-17 23:19:26,117 - tests.integration.phase0_test_harness - INFO -   Checkpoint interval: 5
2025-10-17 23:19:26,117 - tests.integration.phase0_test_harness - INFO - ======================================================================
2025-10-17 23:19:26,117 - __main__ - INFO - Starting 10-generation smoke test...
2025-10-17 23:19:26,117 - __main__ - INFO - 
2025-10-17 23:19:26,117 - tests.integration.phase0_test_harness - INFO - Initializing components...
2025-10-17 23:19:26,117 - tests.integration.phase0_test_harness - INFO -   âœ… MomentumTemplate initialized
2025-10-17 23:19:26,117 - tests.integration.phase0_test_harness - INFO -   âœ… PopulationManager initialized (size=30, elites=3)
2025-10-17 23:19:26,118 - tests.integration.phase0_test_harness - INFO -   âœ… GeneticOperators initialized (mutation_rate=0.15)
2025-10-17 23:19:26,118 - tests.integration.phase0_test_harness - INFO -   âœ… FitnessEvaluator initialized (IS: 2015:2020, OOS: 2021:2024)
2025-10-17 23:19:26,118 - tests.integration.phase0_test_harness - INFO -   âœ… EvolutionMonitor initialized
2025-10-17 23:19:26,118 - tests.integration.phase0_test_harness - INFO - All components initialized successfully
2025-10-17 23:19:26,118 - tests.integration.phase0_test_harness - INFO - ======================================================================
2025-10-17 23:19:26,118 - tests.integration.phase0_test_harness - INFO - STARTING PHASE 1 EVOLUTIONARY LEARNING
2025-10-17 23:19:26,118 - tests.integration.phase0_test_harness - INFO - ======================================================================
2025-10-17 23:19:26,119 - tests.integration.phase0_test_harness - INFO - Configuration:
2025-10-17 23:19:26,119 - tests.integration.phase0_test_harness - INFO -   Population size: 30
2025-10-17 23:19:26,119 - tests.integration.phase0_test_harness - INFO -   Generations: 10
2025-10-17 23:19:26,119 - tests.integration.phase0_test_harness - INFO -   Start generation: 0
2025-10-17 23:19:26,119 - tests.integration.phase0_test_harness - INFO -   IS period: 2015:2020
2025-10-17 23:19:26,119 - tests.integration.phase0_test_harness - INFO -   OOS period: 2021:2024
2025-10-17 23:19:26,119 - tests.integration.phase0_test_harness - INFO - 
2025-10-17 23:19:26,120 - tests.integration.phase0_test_harness - INFO - ğŸ§¬ Initializing population...
2025-10-17 23:19:26,120 - tests.integration.phase0_test_harness - INFO - âœ… Population initialized
2025-10-17 23:19:26,120 - tests.integration.phase0_test_harness - INFO -    Population size: 30
2025-10-17 23:19:26,120 - tests.integration.phase0_test_harness - INFO -    Initial diversity: 100.0%
2025-10-17 23:19:26,121 - tests.integration.phase0_test_harness - INFO - ğŸ“Š Evaluating initial population on IS data...
2025-10-17 23:21:38,833 - tests.integration.phase0_test_harness - INFO - âœ… Initial population evaluated
2025-10-17 23:21:38,834 - tests.integration.phase0_test_harness - INFO - 
2025-10-17 23:21:38,835 - tests.integration.phase0_test_harness - INFO - ======================================================================
2025-10-17 23:21:38,836 - tests.integration.phase0_test_harness - INFO - GENERATION 0/9
2025-10-17 23:21:38,836 - tests.integration.phase0_test_harness - INFO - ======================================================================
2025-10-17 23:21:38,837 - tests.integration.phase0_test_harness - INFO - Generation 0 Summary:
2025-10-17 23:21:38,838 - tests.integration.phase0_test_harness - INFO -   Best fitness: 1.1653
2025-10-17 23:21:38,839 - tests.integration.phase0_test_harness - INFO -   Avg fitness: 0.3250
2025-10-17 23:21:38,839 - tests.integration.phase0_test_harness - INFO -   Diversity: 100.0%
2025-10-17 23:21:38,840 - tests.integration.phase0_test_harness - INFO -   Cache hit rate: 0.0%
2025-10-17 23:21:38,840 - tests.integration.phase0_test_harness - INFO -   ğŸ† NEW CHAMPION!
2025-10-17 23:23:44,733 - tests.integration.phase0_test_harness - INFO -   Mutation rate: 0.120
2025-10-17 23:23:44,734 - tests.integration.phase0_test_harness - INFO -   Generation time: 125.9s
2025-10-17 23:23:44,734 - tests.integration.phase0_test_harness - INFO - 
2025-10-17 23:23:44,735 - tests.integration.phase0_test_harness - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2025-10-17 23:23:44,735 - tests.integration.phase0_test_harness - INFO - PROGRESS UPDATE
2025-10-17 23:23:44,736 - tests.integration.phase0_test_harness - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2025-10-17 23:23:44,736 - tests.integration.phase0_test_harness - INFO - Generation: 1/10 (10.0%)
2025-10-17 23:23:44,737 - tests.integration.phase0_test_harness - INFO - Champion updates: 1 (1.0%)
2025-10-17 23:23:44,737 - tests.integration.phase0_test_harness - INFO - Best IS Sharpe: 1.1653
2025-10-17 23:23:44,738 - __main__ - ERROR - 
2025-10-17 23:23:44,738 - __main__ - ERROR - ======================================================================
2025-10-17 23:23:44,739 - __main__ - ERROR - TEST FAILED WITH EXCEPTION
2025-10-17 23:23:44,739 - __main__ - ERROR - ======================================================================
2025-10-17 23:23:44,739 - __main__ - ERROR - Error: 'avg_fitness'
Traceback (most recent call last):
  File "/mnt/c/Users/jnpi/Documents/finlab/run_phase1_smoke_test.py", line 212, in run_phase1_smoke_test
    results = harness.run(data=data, resume_from_checkpoint=None)
  File "/mnt/c/Users/jnpi/Documents/finlab/tests/integration/phase1_test_harness.py", line 364, in run
    self._update_progress_phase1(generation)
  File "/mnt/c/Users/jnpi/Documents/finlab/tests/integration/phase1_test_harness.py", line 476, in _update_progress_phase1
    self.logger.info(f"Avg IS Sharpe: {summary['avg_fitness']:.4f}")
KeyError: 'avg_fitness'
