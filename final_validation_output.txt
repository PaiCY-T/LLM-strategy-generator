YAML validation failed with 1 error(s)
YAML validation failed with 1 error(s)
YAML validation failed with 2 error(s)
YAML validation failed with 2 error(s)
YAML validation failed with 1 error(s)
YAML validation failed with 1 error(s)
YAML validation failed with 2 error(s)
YAML validation failed with 2 error(s)
YAML validation failed with 1 error(s)
YAML validation failed with 1 error(s)
YAML validation failed with 3 error(s)
YAML validation failed with 3 error(s)
YAML validation failed with 3 error(s)
YAML validation failed with 3 error(s)
YAML validation failed with 2 error(s)
YAML validation failed with 2 error(s)
YAML validation failed with 1 error(s)
YAML validation failed with 1 error(s)
YAML validation failed with 2 error(s)
YAML validation failed with 2 error(s)
YAML validation failed with 2 error(s)
YAML validation failed with 2 error(s)
YAML validation failed with 2 error(s)
YAML validation failed with 2 error(s)
YAML validation failed with 2 error(s)
YAML validation failed with 2 error(s)
YAML validation failed with 1 error(s)
YAML validation failed with 1 error(s)
YAML validation failed with 3 error(s)
YAML validation failed with 3 error(s)
YAML validation failed with 2 error(s)
YAML validation failed with 2 error(s)
YAML validation failed with 1 error(s)
YAML validation failed with 1 error(s)
YAML validation failed with 2 error(s)
YAML validation failed with 2 error(s)
YAML validation failed with 2 error(s)
YAML validation failed with 2 error(s)
YAML validation failed with 2 error(s)
YAML validation failed with 2 error(s)

======================================================================
YAML Mode Real API Validation
======================================================================
Provider: openrouter
Model: google/gemini-2.5-flash-lite
Iterations: 10
Target: >90% success rate
======================================================================

[1/3] Initializing InnovationEngine (YAML mode)...
✅ Engine initialized successfully
   Using model: google/gemini-2.5-flash-lite

[2/3] Running 10 iterations with real API calls...
======================================================================

Iteration 1/10:
✅ YAML innovation generated successfully (attempt 1/3)
   Cost: $0.000000, Tokens: 1631, Time: 3.53s
  ✅ SUCCESS - 3.53s, $0.000000
     Code length: 2856 chars
     Progress: 1/1 (100.0%)

Iteration 2/10:
⚠️  YAML validation failed (attempt 1/3)
⚠️  YAML parsing failed (attempt 2/3): while scanning a simple key
  in "<unicode string>", line 57, column 3:
      pass
      ^
could not find expected ':'
  in "<unicode string>", line 59, column 1:
    # Optional: Add any other releva ... 
    ^
❌ Innovation generation failed: YAML validation failed: Missing required field: 'entry_conditions'
  ❌ FAILURE - No code generated
     Progress: 1/2 (50.0%)

Iteration 3/10:
⚠️  YAML validation failed (attempt 1/3)
⚠️  YAML validation failed (attempt 2/3)
❌ Innovation generation failed: YAML validation failed: indicators: Expected type 'object', got list
  ❌ FAILURE - No code generated
     Progress: 1/3 (33.3%)

Iteration 4/10:
⚠️  YAML validation failed (attempt 1/3)
⚠️  YAML validation failed (attempt 2/3)
❌ Innovation generation failed: YAML validation failed: entry_conditions: {'threshold_rules': [{'condition': 'close > sma_50', 'description': 'Price is above the 50-day SMA, indicating an uptrend.'}, {'condition': 'sma_50 > ema_200', 'description': '50-day SMA is above the 200-day EMA, confirming a strong long-term uptrend.'}, {'condition': 'rsi_14 > 55', 'description': 'RSI is above 55, suggesting solid upward momentum without being excessively overbought.'}, {'condition': 'macd_diff_signal > 0', 'description': 'MACD histogram is positive, confirming bullish momentum.'}, {'condition': 'adx_14 > 25', 'description': 'ADX is above 25, indicating a strong trending market suitable for momentum strategies.'}], 'ranking_rules': [{'rule': 'momentum_score', 'order': 'descending', 'description': 'Rank assets by their composite momentum score in descending order.'}], 'logical_operator': 'AND', 'min_liquidity': {'average_volume_20d': 50000000}} is not valid under any of the given schemas
  ❌ FAILURE - No code generated
     Progress: 1/4 (25.0%)

Iteration 5/10:
⚠️  YAML validation failed (attempt 1/3)
⚠️  YAML validation failed (attempt 2/3)
❌ Innovation generation failed: YAML validation failed: indicators: Expected type 'object', got list
  ❌ FAILURE - No code generated
     Progress: 1/5 (20.0%)

Iteration 6/10:
⚠️  YAML validation failed (attempt 1/3)
⚠️  YAML validation failed (attempt 2/3)
❌ Innovation generation failed: YAML validation failed: indicators: Expected type 'object', got list
  ❌ FAILURE - No code generated
     Progress: 1/6 (16.7%)

Iteration 7/10:
✅ YAML innovation generated successfully (attempt 1/3)
   Cost: $0.000000, Tokens: 1698, Time: 3.29s
  ✅ SUCCESS - 3.29s, $0.000000
     Code length: 2951 chars
     Progress: 2/7 (28.6%)

Iteration 8/10:
✅ YAML innovation generated successfully (attempt 1/3)
   Cost: $0.000000, Tokens: 1465, Time: 2.71s
  ✅ SUCCESS - 2.71s, $0.000000
     Code length: 2977 chars
     Progress: 3/8 (37.5%)

Iteration 9/10:
⚠️  YAML validation failed (attempt 1/3)
⚠️  YAML validation failed (attempt 2/3)
❌ Innovation generation failed: YAML validation failed: indicators: Expected type 'object', got list
  ❌ FAILURE - No code generated
     Progress: 3/9 (33.3%)

Iteration 10/10:
⚠️  YAML validation failed (attempt 1/3)
⚠️  YAML validation failed (attempt 2/3)
❌ Innovation generation failed: YAML validation failed: entry_conditions: ['rsi.value < 30', 'macd.histogram > 0', 'sma_fast.value > sma_slow.value'] is not valid under any of the given schemas
  ❌ FAILURE - No code generated
     Progress: 3/10 (30.0%)

======================================================================
[3/3] Test Complete


======================================================================
RESULTS SUMMARY
======================================================================

Success Metrics:
  Total Attempts:  10
  Successes:       3
  Failures:        7
  Success Rate:    30.0%
  Target (>90%):   ❌ BELOW TARGET

Cost Metrics:
  Total Cost:      $0.000000
  Avg per Attempt: $0.000000

Performance Metrics:
  Total Time:      82.56s
  Avg per Attempt: 8.26s
  Throughput:      0.12 gen/s

Generated Code:
  Total Generated: 3
  Avg Length:      2928 chars

Errors (7):
  - No code generated: 7x

======================================================================

Results saved to: final_validation_results.json
❌ TEST FAILED - Success rate 30.0% < 90%
