# Phase 3 æ··åˆæ–¹é‡ - å·¥ä½œæµç¨‹èˆ‡ä¾è³´é—œä¿‚

**æ—¥æœŸ**: 2025-11-03 08:00 UTC
**æ–¹é‡**: é¸é … C (æ··åˆæ–¹å¼) - Week 1 é‡æ§‹åŸºç¤ï¼ŒWeek 2 é–‹å§‹åŠŸèƒ½é–‹ç™¼

---

## ğŸ”„ å·¥ä½œæµç¨‹ä¾è³´é—œä¿‚åœ–

```mermaid
graph TD
    A[Step 1: æ›´æ–° requirements.md] --> B[Step 2: zen:planner - Week 1 è¦åŠƒ]
    B --> C[Step 3: æ›´æ–° tasks.md]
    C --> D[ä¸¦è¡ŒåŸ·è¡Œ - Week 1 ä»»å‹™]

    D --> E1[Task 1.1: ConfigManager æå–]
    D --> E2[Task 1.2: LLMClient æå–]
    D --> E3[Task 1.3: IterationHistory é©—è­‰]

    E1 --> F[Week 1 å®Œæˆæª¢æŸ¥é»]
    E2 --> F
    E3 --> F

    F --> G[Step 4: zen:planner - Week 2+ åŠŸèƒ½é–‹ç™¼]
    G --> H[Step 5: é–‹å§‹ Phase 3 åŠŸèƒ½é–‹ç™¼]

    style A fill:#ffcccc
    style B fill:#ccffcc
    style C fill:#ffcccc
    style D fill:#ccccff
    style F fill:#ffffcc
    style G fill:#ccffcc
    style H fill:#ccffff
```

---

## ğŸ“ æ¨è–¦åŸ·è¡Œé †åº

### âœ… æ¨è–¦: **spec workflow â†’ zen:planner â†’ spec workflow**

**ç†ç”±**:
1. **æ–‡æª”é©…å‹•é–‹ç™¼**: å…ˆæ›´æ–° requirements.md åæ˜ æ–°æ–¹é‡
2. **è¦åŠƒåŸºæ–¼éœ€æ±‚**: planner æ ¹æ“šæ˜ç¢ºçš„æ–‡æª”é€²è¡Œè¦åŠƒ
3. **ä»»å‹™åŒæ­¥æ›´æ–°**: è¦åŠƒå®Œæˆå¾Œæ›´æ–° tasks.md

---

## ğŸ“‹ è©³ç´°æ­¥é©Ÿ (å«ä¾è³´é—œä¿‚)

### Step 1: æ›´æ–° requirements.md (30 åˆ†é˜)

**ä¾è³´**: ç„¡ï¼ˆç¨ç«‹ä»»å‹™ï¼‰

**å·¥å…·**: spec workflow æˆ–ç›´æ¥ç·¨è¼¯

**ç›®æ¨™**: åæ˜ æ··åˆæ–¹é‡
- æ·»åŠ  "Phased Implementation Strategy" ç« ç¯€
- Week 1: é‡æ§‹åŸºç¤æ¨¡çµ„
- Week 2+: åŠŸèƒ½é–‹ç™¼

**è¼¸å‡º**:
- `requirements.md` æ–°å¢ç« ç¯€
- æ˜ç¢º Week 1 vs Week 2+ çš„ç•Œé™

**é˜»å¡**: Step 2 (planner éœ€è¦æ˜ç¢ºçš„éœ€æ±‚)

---

### Step 2: zen:planner - Week 1 é‡æ§‹è¦åŠƒ (45 åˆ†é˜)

**ä¾è³´**: âœ… Step 1 å®Œæˆ

**å·¥å…·**: `mcp__zen__planner`

**è¼¸å…¥**:
- æ›´æ–°å¾Œçš„ requirements.md
- PHASE3_DEEP_ANALYSIS_AND_TEST_STRATEGY_COMPLETE.md
- ç•¶å‰ design.md (å·²æœ‰é‡æ§‹è·¯ç·šåœ–)

**ç›®æ¨™**: å±•é–‹ Week 1 å…·é«”ä»»å‹™
```
Week 1 (5 days):
â”œâ”€â”€ Day 1: ConfigManager æå–
â”œâ”€â”€ Day 2-3: LLMClient æå– + æ¸¬è©¦
â””â”€â”€ Day 4-5: IterationHistory é©—è­‰ + æ–‡æª”
```

**è¼¸å‡º**:
- è©³ç´°çš„ä»»å‹™åˆ†è§£
- æ¯å€‹ä»»å‹™çš„é©—æ”¶æ¨™æº–
- æ¸¬è©¦è¦æ±‚
- ä¸¦è¡ŒåŸ·è¡Œå»ºè­°

**é˜»å¡**: Step 3 (tasks.md æ›´æ–°éœ€è¦ planner è¼¸å‡º)

---

### Step 3: æ›´æ–° tasks.md (30 åˆ†é˜)

**ä¾è³´**: âœ… Step 2 å®Œæˆ

**å·¥å…·**: spec workflow æˆ–ç›´æ¥ç·¨è¼¯

**ç›®æ¨™**:
- æ·»åŠ  Week 1 å…·é«”ä»»å‹™åˆ° tasks.md
- æ¨™è¨˜ä»»å‹™ç‹€æ…‹ (pending)
- æ·»åŠ ä¸¦è¡ŒåŸ·è¡Œæ¨™è¨˜

**è¼¸å‡º**:
- tasks.md æ–°å¢ "Week 1: Foundation Refactoring" ç« ç¯€
- æ¯å€‹ä»»å‹™åŒ…å«æ¸¬è©¦è¦æ±‚ã€é©—æ”¶æ¨™æº–

**é˜»å¡**: Step 4 (ä¸¦è¡ŒåŸ·è¡Œä»»å‹™)

---

### Step 4: ä¸¦è¡ŒåŸ·è¡Œ Week 1 ä»»å‹™ (5 å¤©)

**ä¾è³´**: âœ… Step 3 å®Œæˆ

**ä¸¦è¡Œåº¦**: 3 å€‹ä»»å‹™å¯ä¸¦è¡Œï¼ˆå¦‚æœæœ‰å¤šå€‹ agentï¼‰

#### Task 1.1: ConfigManager æå–

**ä¾è³´**: ç„¡ï¼ˆç¨ç«‹ï¼‰
**ä¸¦è¡Œ**: âœ… å¯èˆ‡ Task 1.2, 1.3 ä¸¦è¡Œ
**æ™‚é–“**: 1 å¤©

**å­ä»»å‹™**:
1. å‰µå»º `src/learning/config_manager.py`
2. å¯¦ç¾å–®ä¾‹æ¨¡å¼
3. ç§»é™¤ 6 è™•é‡è¤‡ä»£ç¢¼
4. ç·¨å¯« 8 å€‹å–®å…ƒæ¸¬è©¦
5. æ›´æ–°æ‰€æœ‰å¼•ç”¨

**é©—æ”¶**:
- [ ] 60 è¡Œé‡è¤‡ä»£ç¢¼æ¶ˆé™¤
- [ ] 8 å€‹æ¸¬è©¦é€šé
- [ ] 90% è¦†è“‹ç‡

---

#### Task 1.2: LLMClient æå–

**ä¾è³´**: å»ºè­°å…ˆå®Œæˆ ConfigManager (æ¸›å°‘é‡è¤‡å·¥ä½œ)
**ä¸¦è¡Œ**: âš ï¸ åŠä¸¦è¡Œï¼ˆå¯åŒæ™‚é–‹å§‹ï¼Œä½†å»ºè­°ç­‰ ConfigManagerï¼‰
**æ™‚é–“**: 2 å¤©

**å­ä»»å‹™**:
1. å‰µå»º `src/learning/llm_client.py`
2. æå– lines 637-781 (~145 lines)
3. ä½¿ç”¨ ConfigManager è¼‰å…¥é…ç½®
4. ç·¨å¯« 12 å€‹å–®å…ƒæ¸¬è©¦
5. æ›´æ–° autonomous_loop.py å¼•ç”¨

**é©—æ”¶**:
- [ ] 145 è¡Œä»£ç¢¼æå–
- [ ] 12 å€‹æ¸¬è©¦é€šé
- [ ] 95% è¦†è“‹ç‡
- [ ] ä½¿ç”¨ ConfigManager (ç„¡é‡è¤‡)

---

#### Task 1.3: IterationHistory é©—è­‰

**ä¾è³´**: ç„¡ï¼ˆå·²å­˜åœ¨ï¼‰
**ä¸¦è¡Œ**: âœ… å¯èˆ‡ Task 1.1, 1.2 ä¸¦è¡Œ
**æ™‚é–“**: 2 å¤©

**å­ä»»å‹™**:
1. æª¢æŸ¥ç¾æœ‰æ¸¬è©¦è¦†è“‹ç‡
2. æ·»åŠ ç¼ºå¤±çš„æ¸¬è©¦å ´æ™¯ï¼ˆä¸¦ç™¼ã€éŒ¯èª¤è™•ç†ï¼‰
3. è£œå…… API æ–‡æª”
4. é©—è­‰èˆ‡å…¶ä»–æ¨¡çµ„çš„æ¥å£

**é©—æ”¶**:
- [ ] 6+ æ¸¬è©¦é€šé
- [ ] 90% è¦†è“‹ç‡
- [ ] API æ–‡æª”å®Œæ•´

---

### Step 5: Week 1 å®Œæˆæª¢æŸ¥é» (0.5 å¤©)

**ä¾è³´**: âœ… Task 1.1, 1.2, 1.3 å…¨éƒ¨å®Œæˆ

**æª¢æŸ¥é …ç›®**:
- [ ] ConfigManager: 60 è¡Œé‡è¤‡æ¶ˆé™¤ï¼Œ8 æ¸¬è©¦é€šé
- [ ] LLMClient: 145 è¡Œæå–ï¼Œ12 æ¸¬è©¦é€šé
- [ ] IterationHistory: 6+ æ¸¬è©¦é€šéï¼ŒAPI æ–‡æª”
- [ ] ç¸½æ¸¬è©¦è¦†è“‹ç‡: >88%
- [ ] autonomous_loop.py: æ¸›å°‘ ~205 è¡Œ (60+145)
- [ ] æ‰€æœ‰é›†æˆæ¸¬è©¦é€šé

**ç”¢å‡º**:
- Week 1 å®Œæˆå ±å‘Š
- æ¸¬è©¦è¦†è“‹ç‡å ±å‘Š
- é‡æ§‹å‰å¾Œå°æ¯”

---

### Step 6: zen:planner - Week 2+ åŠŸèƒ½é–‹ç™¼è¦åŠƒ (45 åˆ†é˜)

**ä¾è³´**: âœ… Step 5 æª¢æŸ¥é»é€šé

**ç›®æ¨™**: è¦åŠƒ Phase 3 åŠŸèƒ½é–‹ç™¼
- åŸºæ–¼å·²é‡æ§‹çš„æ¨¡çµ„
- ä½¿ç”¨ä¹¾æ·¨çš„ ConfigManager å’Œ LLMClient

---

## ğŸ”§ ä¸¦è¡ŒåŸ·è¡Œç­–ç•¥

### é«˜ä¸¦è¡Œåº¦å ´æ™¯ (æœ‰å¤šå€‹ Task agents)

```bash
# Day 1: åŒæ™‚å•Ÿå‹• 3 å€‹ agent
Agent 1: ConfigManager æå–
Agent 2: LLMClient æ¸¬è©¦æº–å‚™ (å¯«æ¸¬è©¦)
Agent 3: IterationHistory é©—è­‰

# Day 2:
Agent 1: ConfigManager æ¸¬è©¦ + é›†æˆ
Agent 2: LLMClient æå– (ä½¿ç”¨ ConfigManager)
Agent 3: IterationHistory æ–‡æª”

# Day 3:
Agent 2: LLMClient æ¸¬è©¦
æ‰€æœ‰ agents: é›†æˆé©—è­‰
```

**å„ªé»**:
- 3 å¤©å¯å®Œæˆ Week 1 å…¨éƒ¨å·¥ä½œ
- æœ€å¤§åŒ–è³‡æºåˆ©ç”¨

**é¢¨éšª**:
- ConfigManager å»¶é²æœƒå½±éŸ¿ LLMClient
- éœ€è¦å”èª¿é›†æˆé»

---

### ä½ä¸¦è¡Œåº¦å ´æ™¯ (å–®å€‹æˆ–å…©å€‹ agents)

```bash
# Day 1: ConfigManager (é˜»å¡ä»»å‹™å„ªå…ˆ)
Task 1.1: ConfigManager æå–

# Day 2-3: LLMClient (ä¾è³´ ConfigManager)
Task 1.2: LLMClient æå–

# Day 4-5: IterationHistory (ç¨ç«‹ä»»å‹™)
Task 1.3: IterationHistory é©—è­‰

# æˆ–ä¸¦è¡Œ:
Agent 1 (Day 2-3): LLMClient
Agent 2 (Day 2-3): IterationHistory
```

**å„ªé»**:
- ä¾è³´é—œä¿‚æ¸…æ™°
- é™ä½é›†æˆé¢¨éšª

**ç¼ºé»**:
- éœ€è¦ 5 å¤©å®Œæˆ

---

## ğŸ“Š ä¾è³´çŸ©é™£

| ä»»å‹™ | ä¾è³´æ–¼ | é˜»å¡ | ä¸¦è¡Œåº¦ |
|------|--------|------|--------|
| **Step 1: requirements.md** | - | Step 2 | ç¨ç«‹ |
| **Step 2: planner Week 1** | Step 1 | Step 3 | ç¨ç«‹ |
| **Step 3: tasks.md** | Step 2 | Step 4 | ç¨ç«‹ |
| **Task 1.1: ConfigManager** | Step 3 | Task 1.2 (å»ºè­°) | âœ… é«˜å„ªå…ˆ |
| **Task 1.2: LLMClient** | Task 1.1 (å»ºè­°) | - | âš ï¸ åŠä¸¦è¡Œ |
| **Task 1.3: IterationHistory** | Step 3 | - | âœ… å®Œå…¨ä¸¦è¡Œ |
| **Step 5: æª¢æŸ¥é»** | Task 1.1, 1.2, 1.3 | Step 6 | åŒæ­¥é» |
| **Step 6: planner Week 2+** | Step 5 | Week 2 é–‹ç™¼ | ç¨ç«‹ |

---

## âœ… æ¨è–¦åŸ·è¡Œè¨ˆåŠƒ

### ç«‹å³åŸ·è¡Œ (ä»Šå¤©)

1. **Step 1: æ›´æ–° requirements.md** (30 åˆ†é˜)
   - æ‰‹å‹•ç·¨è¼¯æˆ–ç”¨ spec workflow
   - æ·»åŠ æ··åˆæ–¹é‡èªªæ˜

2. **Step 2: zen:planner Week 1** (45 åˆ†é˜)
   - å±•é–‹å…·é«”ä»»å‹™
   - ç”Ÿæˆæ¸¬è©¦éœ€æ±‚

3. **Step 3: æ›´æ–° tasks.md** (30 åˆ†é˜)
   - åŒæ­¥ planner è¼¸å‡º
   - æ¨™è¨˜ä¸¦è¡Œä»»å‹™

**ä»Šæ—¥ç”¢å‡º**: å®Œæ•´çš„ Week 1 åŸ·è¡Œè¨ˆåŠƒ

---

### Week 1 åŸ·è¡Œ (æ˜å¤©é–‹å§‹)

**Day 1** (ä¸¦è¡Œå•Ÿå‹•):
```bash
Agent 1: Task 1.1 ConfigManager
Agent 2: Task 1.3 IterationHistory (æˆ–ç‚º LLMClient å¯«æ¸¬è©¦)
```

**Day 2-3** (ä¾è³´ ConfigManager):
```bash
Agent 1: Task 1.2 LLMClient æå–
Agent 2: Task 1.3 IterationHistory (å¦‚æœ Day 1 æœªå®Œæˆ)
```

**Day 4-5** (é›†æˆèˆ‡é©—è­‰):
```bash
All agents: é›†æˆæ¸¬è©¦ã€æ–‡æª”ã€æª¢æŸ¥é»
```

---

## ğŸ¯ é—œéµæ±ºç­–é»

### æ±ºç­– 1: ç«‹å³é–‹å§‹æˆ–ç­‰å¾…æ–‡æª”ï¼Ÿ

**å»ºè­°**: å…ˆå®Œæˆ Step 1-3 (æ–‡æª” + è¦åŠƒ)ï¼Œç¢ºä¿æ–¹å‘æ­£ç¢º

**ç†ç”±**:
- æ–‡æª”é©…å‹•é–‹ç™¼æ¸›å°‘è¿”å·¥
- planner ç”¢å‡ºå¯ç›´æ¥æŒ‡å°å¯¦æ–½
- ç¸½è€—æ™‚åƒ…å¢åŠ  ~2 å°æ™‚

---

### æ±ºç­– 2: ä¸¦è¡Œåº¦é¸æ“‡

**å¦‚æœæœ‰å¤šå€‹ agents**: é«˜ä¸¦è¡Œåº¦ (3 å¤©å®Œæˆ)
**å¦‚æœå–®å€‹ agent**: ä½ä¸¦è¡Œåº¦ (5 å¤©å®Œæˆ)

**å»ºè­°**: ä½¿ç”¨ Task tool å•Ÿå‹•å¤šå€‹ä¸¦è¡Œ agents

---

### æ±ºç­– 3: ConfigManager å„ªå…ˆé‚„æ˜¯ä¸¦è¡Œï¼Ÿ

**å»ºè­°**: ConfigManager å„ªå…ˆ
- LLMClient ä¾è³´å®ƒä¾†æ¶ˆé™¤é‡è¤‡
- åƒ…å»¶é² 1 å¤©ï¼Œä½†ä»£ç¢¼æ›´ä¹¾æ·¨

---

## ğŸ“Œ ç¸½çµ

**ç«‹å³åŸ·è¡Œé †åº**:
```
1. æ›´æ–° requirements.md (30 min) - æ‰‹å‹•æˆ– spec workflow
2. zen:planner Week 1 è¦åŠƒ (45 min) - å±•é–‹ä»»å‹™
3. æ›´æ–° tasks.md (30 min) - åŒæ­¥è¦åŠƒ
4. ä¸¦è¡Œå•Ÿå‹• Week 1 ä»»å‹™ (3-5 days)
```

**ä¸¦è¡Œæ©Ÿæœƒ**:
- Task 1.1 (ConfigManager) ç¨ç«‹
- Task 1.3 (IterationHistory) ç¨ç«‹
- Task 1.2 (LLMClient) å»ºè­°ç­‰ ConfigManager

**æª¢æŸ¥é»**:
- Step 5: Week 1 å®Œæˆï¼Œé©—è­‰é‡æ§‹æˆæœ
- Step 6: Week 2+ è¦åŠƒï¼Œé–‹å§‹åŠŸèƒ½é–‹ç™¼

---

**å»ºè­°**: ç¾åœ¨é–‹å§‹åŸ·è¡Œ Step 1-3 (æ–‡æª” + è¦åŠƒ)ï¼Œä»Šæ—¥å®Œæˆå¾Œæ˜å¤©ä¸¦è¡ŒåŸ·è¡Œ Week 1 ä»»å‹™
