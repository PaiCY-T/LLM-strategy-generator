{
  "id": "snapshot_1761404007037_pe3galsi4",
  "approvalId": "approval_1761404006979_tzslqd51h",
  "approvalTitle": "Product Overview - Steering Document",
  "version": 1,
  "timestamp": "2025-10-25T14:53:27.037Z",
  "trigger": "initial",
  "status": "pending",
  "content": "# Product Overview\n\n## Product Purpose\n\nFinlab Backtesting Optimization System æ˜¯ä¸€å€‹æ™ºèƒ½äº¤æ˜“ç­–ç•¥å›žæ¸¬èˆ‡å„ªåŒ–å¹³å°ï¼Œå°ˆç‚ºé€±/æœˆäº¤æ˜“é€±æœŸçš„å€‹äººé‡åŒ–äº¤æ˜“è€…è¨­è¨ˆã€‚ç³»çµ±æ ¸å¿ƒç›®æ¨™æ˜¯é€éŽè‡ªä¸»å­¸ç¿’æ©Ÿåˆ¶ï¼Œå¾žç­–ç•¥å¤±æ•—ä¸­å­¸ç¿’ä¸¦ä¿ç•™æˆåŠŸæ¨¡å¼ï¼Œå¯¦ç¾æŒçºŒçš„ç­–ç•¥å„ªåŒ–èˆ‡æ€§èƒ½æå‡ã€‚\n\nThe system transforms autonomous strategy generation from a \"random generator\" into an **intelligent learning system** that:\n- Automatically identifies and preserves high-performing patterns\n- Learns from failures to avoid repeating mistakes\n- Achieves continuous improvement through evolutionary optimization\n- Eliminates performance regressions after establishing champion strategies\n\n## Target Users\n\n**Primary User**: å€‹äººé‡åŒ–äº¤æ˜“è€…ï¼ˆIndividual Quantitative Tradersï¼‰\n\n**User Profile**:\n- ä½¿ç”¨é€±/æœˆäº¤æ˜“é€±æœŸé€²è¡ŒæŠ•è³‡æ±ºç­–\n- å…·å‚™ Python ç¨‹å¼è¨­è¨ˆèƒ½åŠ›\n- ç†Ÿæ‚‰å°ç£è‚¡å¸‚ç‰¹æ€§ï¼ˆTAIEX, 0050, èžè³‡èžåˆ¸ç­‰ï¼‰\n- è¿½æ±‚ç©©å®šçš„é¢¨éšªèª¿æ•´å ±é…¬ï¼ˆSharpe ratio >1.0ï¼‰\n- æ™‚é–“æœ‰é™ï¼Œéœ€è¦è‡ªå‹•åŒ–ç­–ç•¥å„ªåŒ–\n\n**User Pain Points**:\n1. **æ‰‹å‹•ç­–ç•¥èª¿å„ªè€—æ™‚**: ç¼ºä¹è‡ªå‹•åŒ–æ©Ÿåˆ¶ï¼Œéœ€äººå·¥èª¿æ•´åƒæ•¸\n2. **æ€§èƒ½ä¸ç©©å®š**: ç­–ç•¥è¡¨ç¾æ³¢å‹•å¤§ï¼Œç„¡æ³•æŒçºŒå„ªåŒ–\n3. **ç„¡æ³•å¾žå¤±æ•—ä¸­å­¸ç¿’**: é‡è¤‡ç›¸åŒéŒ¯èª¤ï¼Œæµªè²»è¿­ä»£æˆæœ¬\n4. **ç¼ºä¹æž¶æ§‹æŒ‡å°Ž**: éŽåº¦å·¥ç¨‹åŒ–æˆ–æž¶æ§‹æ··äº‚å½±éŸ¿é–‹ç™¼æ•ˆçŽ‡\n\n## Key Features\n\n### 1. **è‡ªä¸»å­¸ç¿’ç³»çµ±** (Autonomous Learning System)\nChampion tracking with success pattern preservation and failure avoidance\n- ðŸ† Champion tracking: è‡ªå‹•ä¿å­˜ä¸¦è¿½è¹¤æœ€ä½³è¡¨ç¾ç­–ç•¥\n- ðŸŽ¯ Performance attribution: è­˜åˆ¥æˆåŠŸå› ç´ èˆ‡å¤±æ•—æ¨¡å¼\n- ðŸ§¬ Evolutionary prompts: LLM ç´„æŸä¿ç•™æˆåŠŸå…ƒç´ ä¸¦æŽ¢ç´¢æ”¹é€²\n- âœ… MVP Validated: 70% success rate, 1.15 avg Sharpe, 2.48 best Sharpe\n\n### 2. **æ¨¡æ¿ç³»çµ±** (Template System)\nDomain-specific strategy templates with intelligent recommendation\n- ðŸ“‹ 4 proven templates: Turtle, Mastiff, Factor, Momentum\n- ðŸ¤– Performance-based selection: Sharpe tier-based recommendations\n- ðŸ”„ Template diversity: Forced exploration every 5th iteration\n- ðŸ“Š Analytics tracking: Usage statistics and success rate monitoring\n\n### 3. **å› å­åœ–ç³»çµ±** (Factor Graph System)\nCentralized factor library with compositional strategy building\n- ðŸ—ï¸ 13 reusable factors: Momentum, Value, Quality, Risk, Entry, Exit\n- ðŸ” Factor discovery: Category-based search and validation\n- âš¡ High performance: 7-200x faster than targets\n- ðŸ§© Strategy composition: Flexible factor combination and dependencies\n\n### 4. **å¤šå±¤é©—è­‰ç³»çµ±** (Multi-Layer Validation System)\nComprehensive validation to prevent overfitting and ensure robustness\n- ðŸ“Š Train/Val/Test split: Prevent overfitting with separate periods\n- ðŸ”„ Walk-forward analysis: Rolling window validation\n- ðŸ“‰ Bootstrap confidence intervals: Statistical significance testing\n- ðŸŽ¯ Baseline comparison: Beat Buy-and-Hold 0050 benchmark\n- ðŸ§® Bonferroni correction: Multiple comparison adjustment\n\n### 5. **ç©©å®šæ€§æ©Ÿåˆ¶** (Stability Mechanisms)\nAdvanced features ensuring reliable long-term autonomous learning\n- ðŸ“ˆ Variance monitoring: Convergence tracking and instability detection\n- âœ… Preservation validation: Prevent performance regressions\n- ðŸ›¡ï¸ Anti-churn management: Dynamic thresholds prevent excessive updates\n- â®ï¸ Rollback management: Safe rollback to previous champion strategies\n\n## Business Objectives\n\n### Primary Objectives\n1. **æå‡ç­–ç•¥æ€§èƒ½**: Achieve consistent Sharpe ratio >1.2 by iteration 10\n2. **å¢žåŠ æˆåŠŸçŽ‡**: Increase success rate from 33% to >60%\n3. **æ¶ˆé™¤æ€§èƒ½é€€åŒ–**: Eliminate >10% performance regressions after champion established\n4. **åŠ é€Ÿæ”¶æ–‚**: Achieve better performance in fewer iterations (5-7 vs. random walk)\n\n### Secondary Objectives\n1. **çŸ¥è­˜ç´¯ç©**: Build reusable factor library and proven templates\n2. **é–‹ç™¼æ•ˆçŽ‡**: Reduce manual parameter tuning and strategy debugging time\n3. **ç³»çµ±ç©©å®šæ€§**: Maintain 926+ passing tests with >80% code coverage\n4. **å¯ç¶­è­·æ€§**: Follow project principle \"é¿å…éŽåº¦å·¥ç¨‹åŒ–\"\n\n## Success Metrics\n\n### Performance Metrics\n- **Sharpe Ratio**: Target >1.2, Best achieved: 2.48 âœ…\n- **Success Rate**: Target >60%, Achieved: 70% âœ…\n- **Average Sharpe**: Target >0.5, Achieved: 1.15 âœ…\n- **Champion Update Rate**: Target 10-20% (balanced exploration/exploitation)\n\n### Learning Metrics\n- **Convergence**: Variance Ïƒ <0.5 after iteration 10\n- **Regression Prevention**: <10% degradation after champion established\n- **Template Diversity**: â‰¥80% unique strategies in 10 iterations\n- **Preservation Accuracy**: >90% detection of critical parameter changes\n\n### System Quality Metrics\n- **Test Coverage**: >80% code coverage, 926+ tests passing âœ…\n- **Validation Pass Rate**: â‰¥90% for generated strategies\n- **Metric Extraction**: <0.01 error accuracy vs actual backtest âœ…\n- **Performance**: Attribution analysis <100ms, validation <5s âœ…\n\n### Business Impact Metrics\n- **Time Savings**: 50% reduction via metric extraction optimization âœ…\n- **Iteration Efficiency**: 5-7 iterations vs. unpredictable random walk\n- **Code Quality**: 153 Python files, 4.8MB organized codebase\n- **Documentation**: ä¸­è‹±é›™èªžæ”¯æŒï¼Œcomprehensive API docs\n\n## Product Principles\n\n### 1. **é¿å…éŽåº¦å·¥ç¨‹åŒ–** (Avoid Over-Engineering)\nKeep implementation simple and pragmatic, aligned with personal-use context\n- ä½¿ç”¨ 80/20 åŽŸå‰‡ï¼šMVP-quality solutions for non-critical paths (e.g., regex vs. AST)\n- å°ˆæ³¨æ–¼é€±/æœˆäº¤æ˜“é€±æœŸï¼Œä¸è¿½æ±‚æ—¥å…§äº¤æ˜“è¤‡é›œæ€§\n- å„ªå…ˆå¯¦ç”¨æ€§å‹éŽå®Œç¾Žæ€§ï¼šå¿«é€Ÿè¿­ä»£å‹éŽå®Œç¾Žè¨­è¨ˆ\n\n### 2. **å¾žæ•¸æ“šä¸­å­¸ç¿’** (Learn from Data)\nLet empirical evidence guide decisions, not assumptions\n- Champion tracking based on actual Sharpe performance\n- Template recommendations driven by historical success rates\n- Validation criteria calibrated to Taiwan market characteristics\n- Failure patterns automatically extracted and avoided\n\n### 3. **æ¼¸é€²å¼æ”¹é€²** (Incremental Improvement)\nBuild upon success systematically rather than random exploration\n- Preserve proven elements (ROE smoothing, liquidity filters)\n- Â±10-20% parameter adjustments for stable evolution\n- Forced exploration every 5th iteration to prevent local optima\n- Multi-objective validation (Sharpe + Calmar + Drawdown)\n\n### 4. **è‡ªå‹•åŒ–å„ªå…ˆ** (Automation First)\nMinimize manual intervention through intelligent automation\n- Autonomous loop operates without human input\n- Template recommendation fully automated (performance + champion + validation)\n- Metric extraction with 3-method fallback chain\n- Rollback system with automatic validation\n\n### 5. **å¯è§€å¯Ÿæ€§** (Observability)\nComprehensive tracking and monitoring for debugging and optimization\n- 926 tests with detailed coverage reports\n- Iteration history with full metrics and code persistence\n- Hall of Fame repository for champion strategies\n- Template analytics with usage trends and success rates\n- JSON logging for performance analysis\n\n### 6. **å‘å¾Œå…¼å®¹** (Backward Compatibility)\nPreserve existing functionality while adding new capabilities\n- 100% backward compatibility maintained across all phases âœ…\n- Migration system with automatic backup before changes\n- Graceful degradation when champion or validation unavailable\n- Fallback mechanisms for all critical paths\n\n## Monitoring & Visibility\n\n### Dashboard & Tracking\n- **Dashboard Type**: CLI-based with structured JSON logging\n- **Real-time Updates**: Iteration-by-iteration metrics tracking\n- **Key Metrics Displayed**:\n  - Current Sharpe ratio and champion comparison\n  - Template usage and success rates\n  - Validation pass/fail status\n  - Learning trajectory (convergence, regression detection)\n  - Hall of Fame leaderboard\n\n### Analytics & Reporting\n- **Iteration History**: Complete record of all strategies and metrics\n- **Template Analytics**: Usage statistics and performance trends\n- **Convergence Reports**: Variance monitoring and recommendations\n- **Champion Audit Trail**: Update history with rationales\n- **Rollback History**: Recovery operations log\n\n### Sharing & Export\n- **JSON Exports**: Comprehensive reports for external analysis\n- **Metrics Files**: Prometheus-compatible format for monitoring\n- **Markdown Reports**: Human-readable summaries and recommendations\n- **Code Persistence**: All generated strategies saved for review\n\n## Future Vision\n\n### Short-Term Enhancements (Next 3-6 months)\n- **ðŸ”¬ Out-of-Sample Validation**: Extend validation to 2025 data for production readiness\n- **ðŸ“Š Grafana Dashboard**: Web-based monitoring with real-time metrics visualization\n- **ðŸ§ª A/B Testing**: Compare multiple templates simultaneously\n- **ðŸ“ˆ Performance Benchmarking**: Systematic comparison vs. market indices\n\n### Medium-Term Enhancements (6-12 months)\n- **ðŸŒ Multi-Market Support**: Extend beyond Taiwan market (US, HK, etc.)\n- **ðŸ¤– Advanced LLM Integration**: Test GPT-5, o3-mini, Gemini-2.5-pro for generation\n- **ðŸ§¬ AST-Based Mutation**: Replace regex with AST for precise code manipulation\n- **ðŸ“¡ Real-Time Data Integration**: Live market data streaming\n\n### Long-Term Vision (12+ months)\n- **ðŸ† Multi-Strategy Portfolio**: Combine multiple champions for diversification\n- **ðŸŒ Community Sharing**: Anonymized factor/template sharing platform\n- **ðŸ”® Predictive Analytics**: Forecast strategy degradation before it happens\n- **ðŸŽ“ Educational Mode**: Tutorial system for learning quantitative trading\n\n### Potential Innovations\n- **Remote Access**: Tunnel features for sharing dashboards with stakeholders\n- **Collaboration**: Multi-user support for team-based strategy development\n- **API Gateway**: RESTful API for external tool integration\n- **Mobile Monitoring**: iOS/Android app for on-the-go tracking\n\n---\n\n**Document Version**: 1.0\n**Last Updated**: 2025-10-25\n**Status**: Draft - Pending Approval\n**Owner**: Personal Project (é€±/æœˆäº¤æ˜“ç³»çµ±)\n",
  "fileStats": {
    "size": 10008,
    "lines": 209,
    "lastModified": "2025-10-25T14:53:17.361Z"
  },
  "comments": []
}