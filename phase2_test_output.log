Failed to load LLM config: '<=' not supported between instances of 'float' and 'str', LLM disabled
WARNING: All log messages before absl::InitializeLog() is called are written to STDERR
E0000 00:00:1761817835.680180   12105 alts_credentials.cc:93] ALTS creds ignored. Not running on GCP and untrusted ALTS is not enabled.
Configuration capture failed: No module named 'src.config.experiment_config'
E0000 00:00:1761817853.599279   12105 alts_credentials.cc:93] ALTS creds ignored. Not running on GCP and untrusted ALTS is not enabled.
Configuration capture failed: No module named 'src.config.experiment_config'
E0000 00:00:1761817873.385478   12105 alts_credentials.cc:93] ALTS creds ignored. Not running on GCP and untrusted ALTS is not enabled.
Testing autonomous loop...

Note: Running without real finlab data - execution will fail
      This tests the loop mechanism, not actual strategy performance


============================================================
AUTONOMOUS LEARNING LOOP - START
============================================================
Model: gemini-2.5-flash
Max iterations: 3
Sandbox mode: ENABLED


============================================================
ITERATION 0
============================================================


[0.5/6] Capturing configuration snapshot...
âœ… Configuration captured
[1/6] Building prompt...
âœ… Prompt ready (7937 chars)

[2/6] Generating strategy with gemini-2.5-flash...
   â†’ Using Factor Graph mutation (default)
ðŸŽ¯ Attempting Google AI (primary)...
Calling Google AI with gemini-2.5-flash (attempt 1/3)...
ðŸ“ Response preview: # 1. Load data
close = data.get('price:æ”¶ç›¤åƒ¹')
trading_value = data.get('price:æˆäº¤é‡‘é¡')
market_cap = data.get('etl:market_value')
roe = data.get('fundamental_features:ROEç¨…å¾Œ')
revenue_yoy = data.get('monthly_revenue:åŽ»å¹´åŒæœˆå¢žæ¸›(%)')
foreign_net_buy = data.get('institutional_investors_trading_summary:å¤–é™¸è³‡è²·è³£è¶…è‚¡æ•¸(ä¸å«å¤–è³‡è‡ªç‡Ÿå•†)')
rsi = data.indicator('RSI')

# 2. Calculate factors
# Factor 1: Long-term Price Momentum (60-day returns)
momentum_factor = close.pct_change(60).shift(1)

# Factor 2: Quality (4-quarter ave...
   âœ“ Detected raw Python code (Strategy 3): 42/45 lines are Python
âœ… Successfully generated strategy (2212 chars)
âœ… Strategy generated (2212 chars)

[2.5/6] Auto-fixing dataset keys...
   Code hash: 882a9fc22e0ebafe
âœ… No fixes needed

[2.7/6] Static validation...
âœ… Static validation passed

[3/6] Validating code...
âœ… Validation passed

[4/6] Executing strategy (mode: sandbox)...
âŒ Execution failed
   Error: Container exited with code 1:
Traceback (most recent call last):
  File "/code/strategy.py", line 31...

[5/6] Building feedback...
âœ… Feedback generated (395 chars)

[6/6] Recording iteration...
âœ… Iteration recorded
âœ… Code saved to generated_strategy_loop_iter0.py

============================================================
ITERATION 1
============================================================


[0.5/6] Capturing configuration snapshot...
âš ï¸  Configuration capture failed (continuing)
[1/6] Building prompt...
âœ… Prompt ready (8341 chars)

[2/6] Generating strategy with gemini-2.5-flash...
   â†’ Using Factor Graph mutation (default)
ðŸŽ¯ Attempting Google AI (primary)...
Calling Google AI with gemini-2.5-flash (attempt 1/3)...
ðŸ“ Response preview: # 1. Load data
close = data.get('price:æ”¶ç›¤åƒ¹')
trading_value = data.get('price:æˆäº¤é‡‘é¡')
market_cap = data.get('etl:market_value')
roe = data.get('fundamental_features:ROEç¨…å¾Œ')
revenue_yoy = data.get('monthly_revenue:åŽ»å¹´åŒæœˆå¢žæ¸›(%)')
foreign_net_buy = data.get('institutional_investors_trading_summary:å¤–é™¸è³‡è²·è³£è¶…è‚¡æ•¸(ä¸å«å¤–è³‡è‡ªç‡Ÿå•†)')
rsi = data.indicator('RSI')

# 2. Calculate factors
# Factor 1: Price Momentum (60-day returns)
momentum = close.pct_change(60).shift(1)

# Factor 2: Quality & Growth (Combined ROE and Mont...
   âœ“ Detected raw Python code (Strategy 3): 46/49 lines are Python
âœ… Successfully generated strategy (2518 chars)
âœ… Strategy generated (2518 chars)

[2.5/6] Auto-fixing dataset keys...
   Code hash: c9076e2e1e42d9e2
âœ… No fixes needed

[2.7/6] Static validation...
âœ… Static validation passed

[3/6] Validating code...
âœ… Validation passed

[4/6] Executing strategy (mode: sandbox)...
âŒ Execution failed
   Error: Container exited with code 1:
Traceback (most recent call last):
  File "/code/strategy.py", line 31...

[5/6] Building feedback...
âœ… Feedback generated (395 chars)

[6/6] Recording iteration...
âœ… Iteration recorded
âœ… Code saved to generated_strategy_loop_iter1.py

============================================================
ITERATION 2
============================================================


[0.5/6] Capturing configuration snapshot...
âš ï¸  Configuration capture failed (continuing)
[1/6] Building prompt...
âœ… Prompt ready (8341 chars)

[2/6] Generating strategy with gemini-2.5-flash...
   â†’ Using Factor Graph mutation (default)
ðŸŽ¯ Attempting Google AI (primary)...
Calling Google AI with gemini-2.5-flash (attempt 1/3)...
ðŸ“ Response preview: # 1. Load data
close = data.get('price:æ”¶ç›¤åƒ¹')
trading_value = data.get('price:æˆäº¤é‡‘é¡')
market_cap = data.get('etl:market_value')
roe = data.get('fundamental_features:ROEç¨…å¾Œ')
revenue_yoy = data.get('monthly_revenue:åŽ»å¹´åŒæœˆå¢žæ¸›(%)')
foreign_net_buy = data.get('institutional_investors_trading_summary:å¤–é™¸è³‡è²·è³£è¶…è‚¡æ•¸(ä¸å«å¤–è³‡è‡ªç‡Ÿå•†)')
rsi = data.indicator('RSI')

# 2. Calculate factors
# Factor 1: Price Momentum (60-day returns)
momentum = close.pct_change(60).shift(1)

# Factor 2: Quality (ROE smoothed over 4 quarters)
...
   âœ“ Detected raw Python code (Strategy 3): 41/44 lines are Python
âœ… Successfully generated strategy (2084 chars)
âœ… Strategy generated (2084 chars)

[2.5/6] Auto-fixing dataset keys...
   Code hash: 3746f7699be8fcb5
âœ… No fixes needed

[2.7/6] Static validation...
âœ… Static validation passed

[3/6] Validating code...
âœ… Validation passed

[4/6] Executing strategy (mode: sandbox)...
âŒ Execution failed
   Error: Container exited with code 1:
Traceback (most recent call last):
  File "/code/strategy.py", line 31...

[5/6] Building feedback...
âœ… Feedback generated (395 chars)

[6/6] Recording iteration...
âœ… Iteration recorded
âœ… Code saved to generated_strategy_loop_iter2.py

============================================================
AUTONOMOUS LEARNING LOOP - COMPLETE
============================================================
Total time: 58.0s
Total iterations: 3
âœ… Successful: 0
âŒ Failed: 3
   - Validation failures: 0
   - Execution failures: 3

Success rate: 0.0%

============================================================
TEST RESULTS
============================================================
Loop completed: 3 iterations
Time per iteration: 19.3s

âœ… Autonomous loop mechanism verified
