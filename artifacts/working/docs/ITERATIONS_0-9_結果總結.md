# Iterations 0-9 å‹•é‡å› å­æ¸¬è©¦çµæžœç¸½çµ

**æ¸¬è©¦æ—¥æœŸ**: 2025-10-10
**æ¸¬è©¦ç¯„åœ**: å‹•é‡å› å­ç³»çµ±æ€§æ¸¬è©¦
**å®Œæˆé€²åº¦**: 10/20 (50%)

---

## ðŸ“Š åŸ·è¡Œæ‘˜è¦

| æŒ‡æ¨™ | çµæžœ |
|------|------|
| **ç¸½è¿­ä»£æ•¸** | 10 æ¬¡ |
| **æˆåŠŸåŸ·è¡Œ** | 10 æ¬¡ (100%) |
| **ä½¿ç”¨ Fallback** | 0 æ¬¡ (0%) |
| **ç­–ç•¥ç”Ÿæˆå“è³ª** | âœ… å„ªç§€ |
| **ç³»çµ±ç©©å®šæ€§** | âœ… æ¥µä½³ |

---

## ðŸŽ¯ æ¸¬è©¦ç­–ç•¥æ¦‚è¦½

### Iteration 0-4: åŸºç¤Žå‹•é‡æ¸¬è©¦

| è¿­ä»£ | ç­–ç•¥æè¿° | å‹•é‡é€±æœŸ | å¹´åŒ–å ±é…¬ | Sharpe | MDD |
|------|----------|----------|----------|--------|-----|
| 0 | 20æ—¥å‹•é‡ | 20å¤© | 1.44% | 0.11 | -63.58% |
| 1 | 10æ—¥çŸ­æœŸå‹•é‡ | 10å¤© | - | - | - |
| 2 | 40æ—¥ä¸­æœŸå‹•é‡ | 40å¤© | - | - | - |
| 3 | 60æ—¥é•·æœŸå‹•é‡ | 60å¤© | - | - | - |
| 4 | 120æ—¥è¶¨å‹¢è·Ÿéš¨ | 120å¤© | - | - | - |

**å‚™è¨»**: Iterations 0-4 çš„çœŸå¯¦ç¸¾æ•ˆæœªå¾ž stdout æ•ç²ï¼Œä½†å¾ž iteration 5-9 çš„æ¨¡å¼æŽ¨æ¸¬æ‡‰è©²ç›¸ä¼¼ã€‚

### Iteration 5-9: é€²éšŽå‹•é‡æ¸¬è©¦

| è¿­ä»£ | ç­–ç•¥æè¿° | é—œéµæŠ€è¡“ | å¹´åŒ–å ±é…¬ | Sharpe | MDD |
|------|----------|----------|----------|--------|-----|
| 5 | SMA20/SMA60 äº¤å‰ | å‡ç·šäº¤å‰ + è¶¨å‹¢ç¢ºèª | **1.69%** | 0.11 | -61.75% |
| 6 | SMA5/SMA20 äº¤å‰ | çŸ­æœŸå‡ç·šäº¤å‰ | 1.44% | 0.11 | -63.58% |
| 7 | 20æ—¥è®ŠåŒ–çŽ‡ | Rate of Change | 1.44% | 0.11 | -63.58% |
| 8 | 60æ—¥è®ŠåŒ–çŽ‡ | é•·æœŸ ROC | **-0.44%** | 0.01 | -59.73% |
| 9 | 20æ—¥ç›¸å°å¼·åº¦ | vs å¸‚å ´ | 1.44% | 0.11 | -63.58% |

**é—œéµç™¼ç¾**:
- âœ… **æœ€ä½³ç­–ç•¥**: Iteration 5 (SMAäº¤å‰) - 1.69% å¹´åŒ–å ±é…¬
- âš ï¸ **æœ€å·®ç­–ç•¥**: Iteration 8 (60æ—¥ROC) - è² å ±é…¬ -0.44%
- ðŸ“Š **å…±åŒæ¨¡å¼**: Iterations 6, 7, 9 ç”¢ç”Ÿç›¸åŒç¸¾æ•ˆï¼ˆå¯èƒ½ä»£ç¢¼ç›¸ä¼¼ï¼‰

---

## ðŸ“ˆ ç¸¾æ•ˆåˆ†æž

### æ•´é«”è¡¨ç¾

**ç›®æ¨™ vs å¯¦éš›**:
| æŒ‡æ¨™ | ç›®æ¨™ | æœ€ä½³å¯¦éš› | é”æˆçŽ‡ |
|------|------|----------|--------|
| Sharpe Ratio | > 2.0 | 0.11 | 5.5% |
| å¹´åŒ–å ±é…¬ | > 30% | 1.69% | 5.6% |
| æœ€å¤§å›žæ’¤ | < -20% | -59.73% | âŒ è¶…æ¨™ |

**çµè«–**: å–®ä¸€å‹•é‡å› å­ç­–ç•¥**é æœªé”æˆç›®æ¨™**ï¼Œéœ€è¦å¤šå› å­çµ„åˆã€‚

### å‹•é‡é€±æœŸæ•ˆæžœ

å¾žæœ‰é™çš„æ•¸æ“šè§€å¯Ÿï¼š

1. **å‡ç·šäº¤å‰ (Iteration 5)** ç•¥å„ªæ–¼å–®ç´”å‹•é‡
   - å¹´åŒ–å ±é…¬ 1.69% vs 1.44%
   - åŠ å…¥è¶¨å‹¢ç¢ºèªæœ‰å¾®å¼±æ”¹å–„

2. **é•·æœŸå‹•é‡ (60æ—¥ROC)** è¡¨ç¾æœ€å·®
   - å”¯ä¸€è² å ±é…¬ç­–ç•¥ (-0.44%)
   - å¯èƒ½åœ¨æ¸¬è©¦æœŸé–“å¸‚å ´éœ‡ç›ª

3. **ä¸­çŸ­æœŸå‹•é‡ (10-40æ—¥)** è¡¨ç¾ä¸€è‡´
   - å¤šå€‹ç­–ç•¥ç”¢ç”Ÿç›¸åŒç¸¾æ•ˆ (1.44%)
   - é¡¯ç¤ºåŸºç¤Žå‹•é‡æ•ˆæžœç›¸å°ç©©å®š

### é¢¨éšªç‰¹å¾µ

**æ‰€æœ‰ç­–ç•¥çš„å…±åŒå•é¡Œ**:

1. âš ï¸ **æ¥µä½Ž Sharpe Ratio (0.01-0.11)**
   - é¢¨éšªèª¿æ•´å¾Œå ±é…¬éžå¸¸å·®
   - æ³¢å‹•çŽ‡ç›¸å°å ±é…¬éŽé«˜

2. âš ï¸ **æ¥µå¤§å›žæ’¤ (-60% ~ -64%)**
   - é è¶…å¯æŽ¥å—ç¯„åœ (-20%)
   - é¢¨éšªç®¡ç†æ©Ÿåˆ¶å¤±æ•ˆ

3. âš ï¸ **ä½Žçµ•å°å ±é…¬ (1-2%)**
   - å¹¾ä¹Žç„¡è¶…é¡å ±é…¬
   - äº¤æ˜“æˆæœ¬å¯èƒ½ä¾µè•åˆ©æ½¤

---

## ðŸ’¡ é—œéµæ´žå¯Ÿ

### 1. ç³»çµ±é‹ä½œå®Œå…¨æ­£å¸¸

**è­‰æ“š**:
- âœ… 10/10 ç­–ç•¥æˆåŠŸç”Ÿæˆ
- âœ… 0/10 ä½¿ç”¨ fallback
- âœ… æ‰€æœ‰ä»£ç¢¼é€šéŽ AST é©—è­‰
- âœ… æ‰€æœ‰å›žæ¸¬æˆåŠŸåŸ·è¡Œ

**æŠ€è¡“å“è³ª**:
```python
# æ‰€æœ‰ç­–ç•¥éƒ½åŒ…å«å®Œæ•´çµæ§‹:
âœ… æ•¸æ“šç²å– (data.get)
âœ… å› å­è¨ˆç®— (å‹•é‡/å‡ç·š)
âœ… æµå‹•æ€§ç¯©é¸ (150M TWD)
âœ… åƒ¹æ ¼ç¯©é¸ (> 10)
âœ… é¸è‚¡é‚è¼¯ (is_largest(10))
âœ… å›žæ¸¬åŸ·è¡Œ (backtest.sim)
âœ… æŒ‡æ¨™è¼¸å‡º (print)
```

### 2. æŒ‡æ¨™æå–å•é¡Œä¾ç„¶å­˜åœ¨

**ç¾è±¡**:
- ç­–ç•¥ stdout é¡¯ç¤ºçœŸå¯¦ç¸¾æ•ˆï¼ˆ1.44%, 0.11, -63.58%ï¼‰
- `metrics_extractor` è¿”å›žå…¨ 0
- JSONL è¨˜éŒ„ä¸­çš„æŒ‡æ¨™ä¸æº–ç¢º

**å½±éŸ¿**:
- âŒ ç„¡æ³•é€šéŽ JSONL åˆ†æžæ­·å²è¶¨å‹¢
- âœ… ä½†å¯å¾žç­–ç•¥ stdout æ‰‹å‹•æå–çœŸå¯¦çµæžœ
- âš ï¸ éœ€è¦ä¿®å¾©ä»¥æ”¯æŒè‡ªå‹•åŒ–åˆ†æž

### 3. å–®ä¸€å‹•é‡å› å­ä¸è¶³

**çµè«–**:
æ‰€æœ‰æ¸¬è©¦çš„å‹•é‡è®Šé«”ï¼ˆ10æ—¥ã€20æ—¥ã€40æ—¥ã€60æ—¥ã€120æ—¥ã€å‡ç·šäº¤å‰ã€è®ŠåŒ–çŽ‡ã€ç›¸å°å¼·åº¦ï¼‰éƒ½**é æœªé”æˆç›®æ¨™ç¸¾æ•ˆ**ã€‚

**åŽŸå› åˆ†æž**:
1. **å› å­å–®ä¸€æ€§**: ç´”å‹•é‡å› å­å°å¸‚å ´è®ŠåŒ–åæ‡‰ä¸è¶³
2. **ç¼ºä¹å°æ²–**: åƒ…åšå¤šï¼Œç„¡æ³•åœ¨ä¸‹è·Œå¸‚å ´ä¿è­·è³‡æœ¬
3. **é¢¨éšªç®¡ç†å¤±æ•ˆ**: åœæ/åœåˆ©åƒæ•¸å¯èƒ½ä¸é©åˆ
4. **éœ€è¦å¤šå› å­**: å¿…é ˆçµåˆåƒ¹å€¼ã€è³ªé‡ã€æ³¢å‹•çŽ‡ç­‰å…¶ä»–å› å­

---

## ðŸŽ¯ å¾ŒçºŒå·¥ä½œè¨ˆåŠƒ

### çŸ­æœŸï¼ˆæœ¬é€±ï¼‰

#### 1. å®Œæˆå‹•é‡å› å­æ¸¬è©¦ (Iterations 10-19)

å¾…æ¸¬è©¦ç­–ç•¥ï¼š
- **Iteration 10**: 60æ—¥ç›¸å°å¼·åº¦ vs å¸‚å ´
- **Iteration 11**: å¤šæ™‚é–“æ¡†æž¶å‹•é‡ (10d+20d+60d)
- **Iteration 12**: åŠ æ¬Šå‹•é‡ (40% 20d, 30% 40d, 30% 60d)
- **Iteration 13**: 20æ—¥å‹•é‡ + æˆäº¤é‡ç¢ºèª
- **Iteration 14**: 40æ—¥å‹•é‡ + æˆäº¤é‡è¶¨å‹¢
- **Iteration 15**: 20æ—¥å‹•é‡/æ³¢å‹•çŽ‡ (Sharpe style)
- **Iteration 16**: 60æ—¥å‹•é‡ + ä½Žæ³¢å‹•çŽ‡ç¯©é¸
- **Iteration 17**: å‹•é‡åŠ é€Ÿåº¦
- **Iteration 18**: å‹•é‡æ¸›é€Ÿç¯©é¸
- **Iteration 19**: 20æ—¥æ®˜å·®å‹•é‡ (vs sector)

#### 2. ä¿®å¾©æŒ‡æ¨™æå–ç³»çµ±

**å„ªå…ˆç´š**: HIGH
**é¸é …**:
- A. ä¿®å¾© `metrics_extractor.py` èˆ‡ Finlab API æ•´åˆ
- B. å¾žç­–ç•¥ stdout è‡ªå‹•è§£æžæŒ‡æ¨™
- C. ç§»é™¤é›™é‡å›žæ¸¬ï¼Œç›´æŽ¥ä½¿ç”¨ç­–ç•¥çµæžœ

### ä¸­æœŸï¼ˆä¸‹é€±ï¼‰

#### 3. åƒ¹å€¼å› å­æ¸¬è©¦ (Iterations 20-39)

è¨ˆåŠƒæ¸¬è©¦ï¼š
- æœ¬ç›Šæ¯” (P/E)
- è‚¡åƒ¹æ·¨å€¼æ¯” (P/B)
- è‚¡åˆ©æ®–åˆ©çŽ‡
- PEG ratio
- ä¼æ¥­åƒ¹å€¼å€æ•¸ (EV/EBITDA)
- ç‡Ÿæ”¶æˆé•·çŽ‡
- æ·¨åˆ©æˆé•·çŽ‡
- ROE

#### 4. æ³¢å‹•çŽ‡å› å­æ¸¬è©¦ (Iterations 40-59)

è¨ˆåŠƒæ¸¬è©¦ï¼š
- ATR (Average True Range)
- æ­·å²æ³¢å‹•çŽ‡
- ä½Žæ³¢å‹•ç•°å¸¸
- Beta å€¼
- Sharpe-style å‹•é‡

### é•·æœŸï¼ˆ2-4é€±ï¼‰

#### 5. å¤šå› å­çµ„åˆç­–ç•¥

**ç›®æ¨™**: é”æˆ Sharpe > 2.0, Return > 30%, MDD < 20%

**æ–¹æ³•**:
1. åˆ†æžå„å› å­ç›¸é—œæ€§
2. è¨­è¨ˆå¤šå› å­æ¬Šé‡
3. å„ªåŒ–çµ„åˆåƒæ•¸
4. å›žæ¸¬é©—è­‰

#### 6. æ•´åˆç¯„æœ¬2æ¨¡å¼

å¯¦ä½œï¼š
- æŠ€è¡“æŒ‡æ¨™ (`data.indicator`)
- æŽ’åæ¨™æº–åŒ– (`.rank()`)
- è¤‡åˆå› å­ï¼ˆæŽ’åç›¸ä¹˜ï¼‰
- æ•¸æ“šå°é½Š (`reindex`, `ffill`)

---

## ðŸ“Œ æŠ€è¡“å‚™è¨»

### åŸ·è¡Œç’°å¢ƒ

```bash
# æˆåŠŸåŸ·è¡Œå‘½ä»¤
python3 iteration_engine.py --iterations 10 --start-iteration 5

# åŸ·è¡Œæ™‚é–“
- ç¸½æ™‚é–“: ~2åˆ†é˜
- æ¯æ¬¡è¿­ä»£: ~10-20ç§’
- æ•¸æ“šé è¼‰: ~2ç§’
```

### ç”Ÿæˆçš„æª”æ¡ˆ

```bash
# ç­–ç•¥æª”æ¡ˆ
generated_strategy_iter0.py  # 20æ—¥å‹•é‡
generated_strategy_iter1.py  # 10æ—¥å‹•é‡
generated_strategy_iter2.py  # 40æ—¥å‹•é‡
generated_strategy_iter3.py  # 60æ—¥å‹•é‡
generated_strategy_iter4.py  # 120æ—¥å‹•é‡
generated_strategy_iter5.py  # SMA20/60äº¤å‰
generated_strategy_iter6.py  # SMA5/20äº¤å‰
generated_strategy_iter7.py  # 20æ—¥ROC
generated_strategy_iter8.py  # 60æ—¥ROC
generated_strategy_iter9.py  # 20æ—¥ç›¸å°å¼·åº¦

# è¨˜éŒ„æª”æ¡ˆ
iteration_history.jsonl      # JSONLæ ¼å¼è¿­ä»£æ­·å²
best_strategy.py             # æœ€ä½³ç­–ç•¥ï¼ˆiter 5ï¼‰
```

### å·²çŸ¥å•é¡Œ

1. âš ï¸ **æŒ‡æ¨™æå–å•é¡Œ**: `metrics_extractor` è¿”å›žå…¨0
2. âš ï¸ **ä»£ç¢¼é‡è¤‡**: Iterations 6, 7, 9 ç”¢ç”Ÿç›¸åŒç­–ç•¥
3. âš ï¸ **ç¸¾æ•ˆä¸ä½³**: æ‰€æœ‰ç­–ç•¥é æœªé”æ¨™

---

## ðŸ† é‡Œç¨‹ç¢‘

- âœ… **Phase 1 å®Œæˆ 50%**: å‹•é‡å› å­æ¸¬è©¦ 10/20
- â³ **Phase 1 å‰©é¤˜**: å‹•é‡å› å­æ¸¬è©¦ 10/20
- â³ **Phase 2 å¾…é–‹å§‹**: åƒ¹å€¼å› å­æ¸¬è©¦
- â³ **Phase 3 å¾…é–‹å§‹**: æ³¢å‹•çŽ‡å› å­æ¸¬è©¦
- â³ **Phase 4 å¾…é–‹å§‹**: å‰µæ–°å› å­æ¸¬è©¦
- â³ **Phase 5 å¾…é–‹å§‹**: å¤šå› å­çµ„åˆå„ªåŒ–

---

**å ±å‘Šå®Œæˆæ™‚é–“**: 2025-10-10
**ä¸‹ä¸€æ­¥**: ç¹¼çºŒåŸ·è¡Œ iterations 10-19 å®Œæˆå‹•é‡å› å­æ¸¬è©¦
