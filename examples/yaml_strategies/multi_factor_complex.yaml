# Multi-Factor Complex Strategy
# ===============================
# Advanced strategy combining momentum, fundamental catalysts, and multiple exit conditions.
# Demonstrates complex factor dependencies and comprehensive risk management.
#
# Strategy Logic:
# 1. Calculate price momentum (15-day)
# 2. Apply moving average filter (90-day for strong trend)
# 3. Check revenue catalyst (3-month acceleration)
# 4. Check earnings catalyst (2-quarter ROE improvement)
# 5. Entry when all signals align (momentum + trend + fundamentals)
# 6. Multiple exit conditions:
#    - Trailing stop (12% with 6% activation)
#    - Profit target (25%)
#    - Volatility stop (2.5x std dev)
#    - Time limit (45 days)
# 7. Composite exit with OR logic

strategy_id: "multi-factor-complex-v1"
description: "Advanced multi-factor strategy combining momentum, fundamental catalysts, and comprehensive risk management with multiple exit conditions"

metadata:
  version: "1.0.0"
  author: "FinLab LLM System"
  created_at: "2025-10-23T00:00:00Z"
  tags:
    - multi-factor
    - momentum
    - fundamentals
    - catalysts
    - composite-exit
    - advanced
  risk_level: high

factors:
  # === Entry Signal Factors ===

  # Factor 1: Price momentum (15-day)
  - id: "momentum_15"
    type: "momentum_factor"
    parameters:
      momentum_period: 15
    depends_on: []

  # Factor 2: Strong trend filter (90-day MA)
  - id: "ma_filter_90"
    type: "ma_filter_factor"
    parameters:
      ma_periods: 90
    depends_on: []

  # Factor 3: Revenue acceleration catalyst (3-month)
  - id: "revenue_catalyst_3m"
    type: "revenue_catalyst_factor"
    parameters:
      catalyst_lookback: 3
    depends_on: []

  # Factor 4: Earnings momentum catalyst (2-quarter)
  - id: "earnings_catalyst_2q"
    type: "earnings_catalyst_factor"
    parameters:
      catalyst_lookback: 2
    depends_on: []

  # === Exit Signal Factors ===

  # Factor 5: Trailing stop (12% trail, 6% activation)
  - id: "trailing_stop_12"
    type: "trailing_stop_factor"
    parameters:
      trail_percent: 0.12
      activation_profit: 0.06
    depends_on: ["momentum_15", "ma_filter_90"]

  # Factor 6: Profit target (25%)
  - id: "profit_target_25"
    type: "profit_target_factor"
    parameters:
      target_percent: 0.25
    depends_on: ["momentum_15"]

  # Factor 7: Volatility stop (2.5x std dev over 15 days)
  - id: "volatility_stop"
    type: "volatility_stop_factor"
    parameters:
      std_period: 15
      std_multiplier: 2.5
    depends_on: ["momentum_15"]

  # Factor 8: Time-based exit (45 days max)
  - id: "time_exit_45"
    type: "time_based_exit_factor"
    parameters:
      max_holding_periods: 45
    depends_on: ["momentum_15"]

  # Factor 9: Composite exit combining all exit signals
  - id: "composite_exit_all"
    type: "composite_exit_factor"
    parameters:
      exit_signals:
        - "trailing_stop_signal"
        - "profit_target_signal"
        - "volatility_stop_signal"
        - "time_exit_signal"
    depends_on:
      - "trailing_stop_12"
      - "profit_target_25"
      - "volatility_stop"
      - "time_exit_45"
