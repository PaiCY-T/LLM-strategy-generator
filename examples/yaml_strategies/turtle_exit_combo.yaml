# Turtle Trading Strategy with Composite Exit
# ==============================================
# Classic turtle trading strategy with breakout entry and multiple exit conditions.
# Uses ATR for volatility measurement and combines multiple exit signals.
#
# Strategy Logic:
# 1. Calculate ATR (20-day) for volatility measurement
# 2. Detect breakouts (20-day high/low)
# 3. Apply dual MA filter (20/60) for trend confirmation
# 4. Exit via ATR-based stop loss (2x ATR)
# 5. Exit after 30 days maximum holding period
# 6. Combine all exit signals with OR logic

strategy_id: "turtle-exit-combo-v1"
description: "Turtle trading strategy with ATR-based breakout entry and composite exit combining stop loss and time-based exit"

metadata:
  version: "1.0.0"
  author: "FinLab LLM System"
  tags:
    - turtle
    - breakout
    - atr
    - composite-exit
    - volatility
  risk_level: medium

factors:
  # Factor 1: Calculate ATR for volatility measurement
  - id: "atr_20"
    type: "atr_factor"
    parameters:
      atr_period: 20
    depends_on: []

  # Factor 2: Detect 20-day breakouts
  - id: "breakout_20"
    type: "breakout_factor"
    parameters:
      entry_window: 20
    depends_on: []

  # Factor 3: Dual MA filter for trend confirmation
  - id: "dual_ma_filter"
    type: "dual_ma_filter_factor"
    parameters:
      short_ma: 20
      long_ma: 60
    depends_on: []

  # Factor 4: ATR-based stop loss (2x ATR)
  - id: "atr_stop"
    type: "atr_stop_loss_factor"
    parameters:
      atr_multiplier: 2.0
    depends_on: ["atr_20"]

  # Factor 5: Time-based exit (30 days max holding)
  - id: "time_exit"
    type: "time_based_exit_factor"
    parameters:
      max_holding_periods: 30
    depends_on: ["breakout_20"]

  # Factor 6: Composite exit combining all exit signals
  - id: "composite_exit"
    type: "composite_exit_factor"
    parameters:
      exit_signals:
        - "atr_stop_signal"
        - "time_exit_signal"
    depends_on: ["atr_stop", "time_exit"]
