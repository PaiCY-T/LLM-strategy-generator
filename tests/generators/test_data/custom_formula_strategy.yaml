# Custom Formula Strategy Test YAML
# Tests custom_formula position sizing method

metadata:
  name: "Custom Weighted Momentum"
  description: "Use custom formula for position sizing based on multiple factors"
  strategy_type: "momentum"
  rebalancing_frequency: "M"
  version: "1.0.0"
  author: "FinLab LLM System"
  tags:
    - "custom"
    - "momentum"
  risk_level: "medium"

indicators:
  fundamental_factors:
    - name: "roe"
      field: "ROE"
      source: "data.get('ROE')"
      transformation: "rank"

  technical_indicators:
    - name: "rsi_14"
      type: "RSI"
      period: 14
      source: "data.get('RSI_14')"

  custom_calculations:
    - name: "combined_score"
      expression: "(roe * 0.6) + (rsi_14 / 100 * 0.4)"
      description: "Weighted combination of ROE and RSI"

entry_conditions:
  threshold_rules:
    - condition: "rsi_14 > 40"
      description: "RSI above 40"

    - condition: "roe > 0.05"
      description: "Positive ROE"

  logical_operator: "AND"

position_sizing:
  method: "custom_formula"
  custom_formula: "combined_score"
  max_positions: 20
