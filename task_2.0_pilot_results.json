{
  "timestamp": "2025-10-23T23:21:02.232983",
  "iterations": 10,
  "successful_validations": 8,
  "failed_validations": 2,
  "success_rate": 0.8,
  "success_criteria": {
    "validation_success_rate_ge_70_percent": true,
    "at_least_7_valid_factors": true,
    "all_valid_compile_to_code": true,
    "at_least_1_outperforms_baseline": true
  },
  "all_criteria_passed": true,
  "results": [
    {
      "iteration": 0,
      "status": "PASS",
      "factor_name": "Quality_Growth_Value_Composite",
      "yaml_definition": "\nfactor:\n  name: \"Quality_Growth_Value_Composite\"\n  description: \"ROE \u00d7 Revenue Growth / P/E ratio\"\n  type: \"composite\"\n  components:\n    - field: \"roe\"\n    - field: \"revenue_growth\"\n      operation: \"multiply\"\n    - field: \"pe_ratio\"\n      operation: \"divide\"\n  constraints:\n    min_value: 0\n    max_value: 100\n    null_handling: \"drop\"\n    outlier_handling: \"winsorize\"\n  metadata:\n    rationale: \"Combines profitability, growth momentum, and value. High values indicate quality companies with strong growth at reasonable valuations.\"\n    expected_direction: \"higher_is_better\"\n    category: \"mixed\"\n",
      "python_code": "# Generated from YAML factor definition\n# Factor: Quality_Growth_Value_Composite\n# Description: ROE \u00d7 Revenue Growth / P/E ratio\n\nimport numpy as np\nimport pandas as pd\n\n# Start with base field: roe\nresult = data.get('roe')\n# Apply multiply with revenue_growth\nresult = result * data.get('revenue_growth')\n# Apply divide with pe_ratio\ndenominator = data.get('pe_ratio').replace(0, np.nan)\nresult = result / denominator\n\n# Apply constraints\nresult = result.clip(lower=0)\nresult = result.clip(upper=100)\n# Null handling: drop\n\n# Return final factor values\nfactor_values = result",
      "warnings": [],
      "mock_sharpe": 0.5,
      "mock_calmar": 1.0,
      "mock_mdd": 0.3
    },
    {
      "iteration": 1,
      "status": "PASS",
      "factor_name": "Cash_Flow_Quality_Indicator",
      "yaml_definition": "\nfactor:\n  name: \"Cash_Flow_Quality_Indicator\"\n  description: \"Operating Cash Flow / Net Income ratio\"\n  type: \"ratio\"\n  components:\n    - field: \"operating_cash_flow\"\n    - field: \"net_income\"\n      operation: \"divide\"\n  constraints:\n    min_value: 0\n    max_value: 10\n    null_handling: \"drop\"\n    outlier_handling: \"clip\"\n  metadata:\n    rationale: \"Measures earnings quality by comparing cash flow to net income. Ratios above 1 indicate earnings are backed by cash generation.\"\n    expected_direction: \"higher_is_better\"\n    category: \"quality\"\n",
      "python_code": "# Generated from YAML factor definition\n# Factor: Cash_Flow_Quality_Indicator\n# Description: Operating Cash Flow / Net Income ratio\n\nimport numpy as np\nimport pandas as pd\n\n# Start with base field: operating_cash_flow\nresult = data.get('operating_cash_flow')\n# Apply divide with net_income\ndenominator = data.get('net_income').replace(0, np.nan)\nresult = result / denominator\n\n# Apply constraints\nresult = result.clip(lower=0)\nresult = result.clip(upper=10)\n# Null handling: drop\n\n# Return final factor values\nfactor_values = result",
      "warnings": [
        "Component 1: Division by 'net_income' may cause issues if values are zero or negative. Code generator will add NaN handling."
      ],
      "mock_sharpe": 0.6,
      "mock_calmar": 1.2,
      "mock_mdd": 0.27999999999999997
    },
    {
      "iteration": 2,
      "status": "FAIL",
      "error": "Missing required field: 'type'",
      "yaml_definition": "\nfactor:\n  name: \"Invalid_Factor\"\n  description: \"This is missing the 'type' field\"\n  components:\n    - field: \"roe\"\n  constraints:\n    min_value: 0\n  metadata:\n    rationale: \"This will fail schema validation\"\n    expected_direction: \"higher_is_better\"\n"
    },
    {
      "iteration": 3,
      "status": "PASS",
      "factor_name": "Profitability_Leverage_Ratio",
      "yaml_definition": "\nfactor:\n  name: \"Profitability_Leverage_Ratio\"\n  description: \"Operating Margin / Debt-to-Equity ratio\"\n  type: \"ratio\"\n  components:\n    - field: \"operating_margin\"\n    - field: \"debt_to_equity\"\n      operation: \"divide\"\n  constraints:\n    min_value: -10\n    max_value: 100\n    null_handling: \"drop\"\n    outlier_handling: \"clip\"\n  metadata:\n    rationale: \"Identifies high-quality companies with strong margins relative to leverage. High values suggest strong profits without excessive debt.\"\n    expected_direction: \"higher_is_better\"\n    category: \"quality\"\n",
      "python_code": "# Generated from YAML factor definition\n# Factor: Profitability_Leverage_Ratio\n# Description: Operating Margin / Debt-to-Equity ratio\n\nimport numpy as np\nimport pandas as pd\n\n# Start with base field: operating_margin\nresult = data.get('operating_margin')\n# Apply divide with debt_to_equity\ndenominator = data.get('debt_to_equity').replace(0, np.nan)\nresult = result / denominator\n\n# Apply constraints\nresult = result.clip(lower=-10)\nresult = result.clip(upper=100)\n# Null handling: drop\n\n# Return final factor values\nfactor_values = result",
      "warnings": [],
      "mock_sharpe": 0.8,
      "mock_calmar": 1.6,
      "mock_mdd": 0.24
    },
    {
      "iteration": 4,
      "status": "PASS",
      "factor_name": "Growth_Efficiency_Score",
      "yaml_definition": "\nfactor:\n  name: \"Growth_Efficiency_Score\"\n  description: \"Revenue Growth \u00d7 Asset Turnover\"\n  type: \"composite\"\n  components:\n    - field: \"revenue_growth\"\n    - field: \"asset_turnover\"\n      operation: \"multiply\"\n  constraints:\n    min_value: 0\n    max_value: 50\n    null_handling: \"forward_fill\"\n    outlier_handling: \"winsorize\"\n  metadata:\n    rationale: \"Combines growth rate with asset efficiency. High scores indicate companies growing revenue while efficiently utilizing assets.\"\n    expected_direction: \"higher_is_better\"\n    category: \"growth\"\n",
      "python_code": "# Generated from YAML factor definition\n# Factor: Growth_Efficiency_Score\n# Description: Revenue Growth \u00d7 Asset Turnover\n\nimport numpy as np\nimport pandas as pd\n\n# Start with base field: revenue_growth\nresult = data.get('revenue_growth')\n# Apply multiply with asset_turnover\nresult = result * data.get('asset_turnover')\n\n# Apply constraints\nresult = result.clip(lower=0)\nresult = result.clip(upper=50)\n# Null handling: forward_fill\nresult = result.fillna(method='ffill')\n\n# Return final factor values\nfactor_values = result",
      "warnings": [],
      "mock_sharpe": 0.9,
      "mock_calmar": 1.8,
      "mock_mdd": 0.21999999999999997
    },
    {
      "iteration": 5,
      "status": "FAIL",
      "error": "Component 1: Field 'nonexistent_field' not available in Finlab data. Available fields: ['asset_turnover', 'capex', 'close', 'current_ratio', 'debt_to_equity', 'dividend_yield', 'dividends', 'earnings_growth', 'ev_to_ebitda', 'free_cash_flow', 'gross_margin', 'high', 'inventory_turnover', 'low', 'market_cap', 'net_income', 'net_margin', 'open', 'operating_cash_flow', 'operating_margin', 'payout_ratio', 'pb_ratio', 'pcf_ratio', 'pe_ratio', 'price_to_book', 'price_to_sales', 'ps_ratio', 'receivables_turnover', 'retention_ratio', 'return_on_capital', 'revenue_growth', 'roa', 'roe', 'shares_outstanding', 'volume', 'working_capital']",
      "yaml_definition": "\nfactor:\n  name: \"Invalid_Field_Factor\"\n  description: \"Uses non-existent field\"\n  type: \"composite\"\n  components:\n    - field: \"roe\"\n    - field: \"nonexistent_field\"\n      operation: \"multiply\"\n  constraints:\n    min_value: 0\n    max_value: 100\n    null_handling: \"drop\"\n  metadata:\n    rationale: \"This will fail field availability check\"\n    expected_direction: \"higher_is_better\"\n    category: \"quality\"\n"
    },
    {
      "iteration": 6,
      "status": "PASS",
      "factor_name": "Value_Quality_Composite",
      "yaml_definition": "\nfactor:\n  name: \"Value_Quality_Composite\"\n  description: \"ROE / P/B ratio - quality-adjusted value\"\n  type: \"ratio\"\n  components:\n    - field: \"roe\"\n    - field: \"pb_ratio\"\n      operation: \"divide\"\n  constraints:\n    min_value: 0\n    max_value: 20\n    null_handling: \"drop\"\n    outlier_handling: \"winsorize\"\n  metadata:\n    rationale: \"Identifies companies with high return on equity relative to price-to-book ratio. High values suggest quality companies trading at reasonable valuations.\"\n    expected_direction: \"higher_is_better\"\n    category: \"value\"\n",
      "python_code": "# Generated from YAML factor definition\n# Factor: Value_Quality_Composite\n# Description: ROE / P/B ratio - quality-adjusted value\n\nimport numpy as np\nimport pandas as pd\n\n# Start with base field: roe\nresult = data.get('roe')\n# Apply divide with pb_ratio\ndenominator = data.get('pb_ratio').replace(0, np.nan)\nresult = result / denominator\n\n# Apply constraints\nresult = result.clip(lower=0)\nresult = result.clip(upper=20)\n# Null handling: drop\n\n# Return final factor values\nfactor_values = result",
      "warnings": [],
      "mock_sharpe": 1.1,
      "mock_calmar": 2.2,
      "mock_mdd": 0.18
    },
    {
      "iteration": 7,
      "status": "PASS",
      "factor_name": "Margin_Sustainability_Score",
      "yaml_definition": "\nfactor:\n  name: \"Margin_Sustainability_Score\"\n  description: \"Gross Margin + Operating Margin average\"\n  type: \"composite\"\n  components:\n    - field: \"gross_margin\"\n    - field: \"operating_margin\"\n      operation: \"add\"\n  constraints:\n    min_value: 0\n    max_value: 200\n    null_handling: \"drop\"\n    outlier_handling: \"none\"\n  metadata:\n    rationale: \"Combined margin score indicates sustainable profitability. Higher scores suggest strong pricing power and operational efficiency.\"\n    expected_direction: \"higher_is_better\"\n    category: \"quality\"\n",
      "python_code": "# Generated from YAML factor definition\n# Factor: Margin_Sustainability_Score\n# Description: Gross Margin + Operating Margin average\n\nimport numpy as np\nimport pandas as pd\n\n# Start with base field: gross_margin\nresult = data.get('gross_margin')\n# Apply add with operating_margin\nresult = result + data.get('operating_margin')\n\n# Apply constraints\nresult = result.clip(lower=0)\nresult = result.clip(upper=200)\n# Null handling: drop\n\n# Return final factor values\nfactor_values = result",
      "warnings": [],
      "mock_sharpe": 1.2000000000000002,
      "mock_calmar": 2.4000000000000004,
      "mock_mdd": 0.15999999999999998
    },
    {
      "iteration": 8,
      "status": "PASS",
      "factor_name": "Turnover_Efficiency_Index",
      "yaml_definition": "\nfactor:\n  name: \"Turnover_Efficiency_Index\"\n  description: \"Asset Turnover \u00d7 Inventory Turnover\"\n  type: \"composite\"\n  components:\n    - field: \"asset_turnover\"\n    - field: \"inventory_turnover\"\n      operation: \"multiply\"\n  constraints:\n    min_value: 0\n    max_value: 100\n    null_handling: \"fill_zero\"\n    outlier_handling: \"clip\"\n  metadata:\n    rationale: \"Measures overall operational efficiency through both asset and inventory utilization. High scores indicate efficient capital deployment.\"\n    expected_direction: \"higher_is_better\"\n    category: \"quality\"\n",
      "python_code": "# Generated from YAML factor definition\n# Factor: Turnover_Efficiency_Index\n# Description: Asset Turnover \u00d7 Inventory Turnover\n\nimport numpy as np\nimport pandas as pd\n\n# Start with base field: asset_turnover\nresult = data.get('asset_turnover')\n# Apply multiply with inventory_turnover\nresult = result * data.get('inventory_turnover')\n\n# Apply constraints\nresult = result.clip(lower=0)\nresult = result.clip(upper=100)\n# Null handling: fill_zero\nresult = result.fillna(0)\n\n# Return final factor values\nfactor_values = result",
      "warnings": [],
      "mock_sharpe": 1.3,
      "mock_calmar": 2.6,
      "mock_mdd": 0.13999999999999999
    },
    {
      "iteration": 9,
      "status": "PASS",
      "factor_name": "FCF_Market_Cap_Yield",
      "yaml_definition": "\nfactor:\n  name: \"FCF_Market_Cap_Yield\"\n  description: \"Free Cash Flow / Market Cap ratio\"\n  type: \"ratio\"\n  components:\n    - field: \"free_cash_flow\"\n    - field: \"market_cap\"\n      operation: \"divide\"\n  constraints:\n    min_value: -1\n    max_value: 1\n    null_handling: \"drop\"\n    outlier_handling: \"winsorize\"\n  metadata:\n    rationale: \"FCF yield indicates cash generation relative to market value. High yields suggest undervalued companies with strong cash generation.\"\n    expected_direction: \"higher_is_better\"\n    category: \"value\"\n",
      "python_code": "# Generated from YAML factor definition\n# Factor: FCF_Market_Cap_Yield\n# Description: Free Cash Flow / Market Cap ratio\n\nimport numpy as np\nimport pandas as pd\n\n# Start with base field: free_cash_flow\nresult = data.get('free_cash_flow')\n# Apply divide with market_cap\ndenominator = data.get('market_cap').replace(0, np.nan)\nresult = result / denominator\n\n# Apply constraints\nresult = result.clip(lower=-1)\nresult = result.clip(upper=1)\n# Null handling: drop\n\n# Return final factor values\nfactor_values = result",
      "warnings": [],
      "mock_sharpe": 1.4,
      "mock_calmar": 2.8,
      "mock_mdd": 0.12
    }
  ]
}